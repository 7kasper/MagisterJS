/* Magister.js (browser version) by simplyApps. Built on: 15-05-2015 21:50 UTC */
/*
	HTTP CLASS
	======================
	
	You have to implement this with your own serverside implementation.
	Beneath here are the requirements you have to follow.

 	======================
   MINIMAL REQUIREMENTS
 	======================
 	callback: function (error, result) {...}
 	result: { content (string), headers (dictionary) }
 	options: { headers (dictionary), data (object) }
	
 	get(url, options*, callback)
 	delete(url, options*, callback)
 	post(url, data, options*, callback)
 	put(url, data, options*, callback)
	
 	* = optional (Fill with default value if null (object) ex.: options ?= {})
	
 	Class holds variable _cookie which is required to be added to the headers
*/

(function() {		 
	this.MagisterHttp = (function() {
			function MagisterHttp() {}

			MagisterHttp.prototype.get = function(url, options, callback) {

			};

			MagisterHttp.prototype["delete"] = function(url, options, callback) {

			};

			MagisterHttp.prototype.post = function(url, data, options, callback) {

			};

			MagisterHttp.prototype.put = function(url, data, options, callback) {

			};

			MagisterHttp.prototype._cookie = "";

			return MagisterHttp;

	})();
}).call(this);
(function(){function a(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||a===u&&d)return 1;if(b>a||!d||b===u&&c)return-1}return 0}function b(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function c(a,b,c){if(b!==b)return m(a,c);c-=1;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function d(a){return"function"==typeof a||!1}function e(a){return"string"==typeof a?a:null==a?"":a+""}function f(a){return a.charCodeAt(0)}function g(a,b){for(var c=-1,d=a.length;++c<d&&-1<b.indexOf(a.charAt(c)););return c}function h(a,b){for(var c=a.length;c--&&-1<b.indexOf(a.charAt(c)););return c}function i(b,c){return a(b.a,c.a)||b.b-c.b}function j(a){return Ka[a]}function k(a){return La[a]}function l(a){return"\\"+Oa[a]}function m(a,b,c){var d=a.length;for(b+=c?0:-1;c?b--:++b<d;){var e=a[b];if(e!==e)return b}return-1}function n(a){return!!a&&"object"==typeof a}function o(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function p(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=N,f[++e]=c);return f}function q(a){for(var b=-1,c=a.length;++b<c&&o(a.charCodeAt(b)););return b}function r(a){for(var b=a.length;b--&&o(a.charCodeAt(b)););return b}function s(a){return Ma[a]}function t(o){function Ka(a){if(n(a)&&!(Gf(a)||a instanceof Na)){if(a instanceof Ma)return a;if(Wd.call(a,"__chain__")&&Wd.call(a,"__wrapped__"))return Lc(a)}return new Ma(a)}function La(){}function Ma(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Na(a){this.__wrapped__=a,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Be,this.__views__=null}function Oa(){this.__data__={}}function Pa(a){var b=a?a.length:0;for(this.data={hash:re(null),set:new je};b--;)this.push(a[b])}function Qa(a,b){var c=a.data;return("string"==typeof b||kd(b)?c.set.has(b):c.hash[b])?0:-1}function Ra(a,b){var c=-1,d=a.length;for(b||(b=Hd(d));++c<d;)b[c]=a[c];return b}function Sa(a,b){for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););return a}function Ta(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function Wa(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function Xa(a,b){for(var c=-1,d=a.length,e=Hd(d);++c<d;)e[c]=b(a[c],c,a);return e}function Ya(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function Za(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function $a(a,b){return a===u?b:a}function _a(a,b,c,d){return a!==u&&Wd.call(d,c)?a:b}function ab(a,b,c){var d=Sf(b);ge.apply(d,Ve(b));for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==u||g in a)||(a[g]=i)}return a}function bb(a,b){for(var c=-1,d=null==a,e=!d&&xc(a),f=e&&a.length,g=b.length,h=Hd(g);++c<g;){var i=b[c];h[c]=e?yc(i,f)?a[i]:u:d?u:a[i]}return h}function cb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function db(a,b,c){var d=typeof a;return"function"==d?b===u?a:Mb(a,b,c):null==a?Cd:"object"==d?tb(a):b===u?Gd(a):ub(a,b)}function eb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==u)return h;if(!kd(a))return a;if(d=Gf(a)){if(h=tc(a),!b)return Ra(a,h)}else{var i=Yd.call(a),j=i==T;if(i!=V&&i!=O&&(!j||e))return Ia[i]?vc(a,i,b):e?a:{};if(h=uc(j?{}:a),!b)return Ke(h,a)}for(f||(f=[]),g||(g=[]),e=f.length;e--;)if(f[e]==a)return g[e];return f.push(a),g.push(h),(d?Sa:mb)(a,function(d,e){h[e]=eb(d,b,c,e,a,f,g)}),h}function fb(a,b,c){if("function"!=typeof a)throw new Qd(M);return ke(function(){a.apply(u,c)},b)}function gb(a,b){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=sc(),h=g==c,i=h&&200<=b.length?Re(b):null,j=b.length;i&&(g=Qa,h=!1,b=i);a:for(;++f<d;)if(i=a[f],h&&i===i){for(var k=j;k--;)if(b[k]===i)continue a;e.push(i)}else 0>g(b,i,0)&&e.push(i);return e}function hb(a,b){var c=!0;return Me(a,function(a,d,e){return c=!!b(a,d,e)}),c}function ib(a,b){var c=[];return Me(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function jb(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function kb(a,b,c){for(var d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d];if(n(h)&&xc(h)&&(c||Gf(h)||hd(h))){b&&(h=kb(h,b,c));for(var i=-1,j=h.length;++i<j;)g[++f]=h[i]}else c||(g[++f]=h)}return g}function lb(a,b){Oe(a,b,sd)}function mb(a,b){return Oe(a,b,Sf)}function nb(a,b){return Pe(a,b,Sf)}function ob(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];If(a[g])&&(f[++e]=g)}return f}function pb(a,b,c){if(null!=a){c!==u&&c in Jc(a)&&(b=[c]),c=-1;for(var d=b.length;null!=a&&++c<d;)a=a[b[c]];return c&&c==d?a:u}}function qb(a,b,c,d,e,f){if(a===b)return!0;var g=typeof a,h=typeof b;if("function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b)a=a!==a&&b!==b;else a:{var g=qb,h=Gf(a),i=Gf(b),j=P,k=P;h||(j=Yd.call(a),j==O?j=V:j!=V&&(h=pd(a))),i||(k=Yd.call(b),k==O?k=V:k!=V&&pd(b));var l=j==V,i=k==V,k=j==k;if(!k||h||l){if(!d&&(j=l&&Wd.call(a,"__wrapped__"),i=i&&Wd.call(b,"__wrapped__"),j||i)){a=g(j?a.value():a,i?b.value():b,c,d,e,f);break a}if(k){for(e||(e=[]),f||(f=[]),j=e.length;j--;)if(e[j]==a){a=f[j]==b;break a}e.push(a),f.push(b),a=(h?nc:pc)(a,b,g,c,d,e,f),e.pop(),f.pop()}else a=!1}else a=oc(a,b,j)}return a}function rb(a,b,c,d,e){for(var f=-1,g=b.length,h=!e;++f<g;)if(h&&d[f]?c[f]!==a[b[f]]:!(b[f]in a))return!1;for(f=-1;++f<g;){var i=b[f],j=a[i],k=c[f];if(h&&d[f]?i=j!==u||i in a:(i=e?e(j,k,i):u,i===u&&(i=qb(k,j,e,!0))),!i)return!1}return!0}function sb(a,b){var c=-1,d=xc(a)?Hd(a.length):[];return Me(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function tb(a){var b=Sf(a),c=b.length;if(!c)return Bd(!0);if(1==c){var d=b[0],e=a[d];if(Dc(e))return function(a){return null==a?!1:a[d]===e&&(e!==u||d in Jc(a))}}for(var f=Hd(c),g=Hd(c);c--;)e=a[b[c]],f[c]=e,g[c]=Dc(e);return function(a){return null!=a&&rb(Jc(a),b,f,g)}}function ub(a,b){var c=Gf(a),d=Ac(a)&&Dc(b),e=a+"";return a=Kc(a),function(f){if(null==f)return!1;var g=e;if(f=Jc(f),!(!c&&d||g in f)){if(f=1==a.length?f:pb(f,Bb(a,0,-1)),null==f)return!1;g=Qc(a),f=Jc(f)}return f[g]===b?b!==u||g in f:qb(b,f[g],null,!0)}}function vb(a,b,c,d,e){if(!kd(a))return a;var f=xc(b)&&(Gf(b)||pd(b));if(!f){var g=Sf(b);ge.apply(g,Ve(b))}return Sa(g||b,function(h,i){if(g&&(i=h,h=b[i]),n(h)){d||(d=[]),e||(e=[]);a:{for(var j=i,k=d,l=e,m=k.length,o=b[j];m--;)if(k[m]==o){a[j]=l[m];break a}var m=a[j],p=c?c(m,o,j,a,b):u,q=p===u;q&&(p=o,xc(o)&&(Gf(o)||pd(o))?p=Gf(m)?m:xc(m)?Ra(m):[]:Jf(o)||hd(o)?p=hd(m)?qd(m):Jf(m)?m:{}:q=!1),k.push(o),l.push(p),q?a[j]=vb(p,o,c,k,l):(p===p?p!==m:m===m)&&(a[j]=p)}}else j=a[i],k=c?c(j,h,i,a,b):u,(l=k===u)&&(k=h),!f&&k===u||!l&&(k===k?k===j:j!==j)||(a[i]=k)}),a}function wb(a){return function(b){return null==b?u:b[a]}}function xb(a){var b=a+"";return a=Kc(a),function(c){return pb(c,a,b)}}function yb(a,b){for(var c=a?b.length:0;c--;){var d=parseFloat(b[c]);if(d!=e&&yc(d)){var e=d;le.call(a,d,1)}}}function zb(a,b){return a+de(ze()*(b-a+1))}function Ab(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Bb(a,b,c){var d=-1,e=a.length;for(b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===u||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0,c=Hd(e);++d<e;)c[d]=a[d+b];return c}function Cb(a,b){var c;return Me(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Db(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function Eb(b,c,d){var e=rc(),f=-1;return c=Xa(c,function(a){return e(a)}),b=sb(b,function(a){return{a:Xa(c,function(b){return b(a)}),b:++f,c:a}}),Db(b,function(b,c){var e;a:{e=-1;for(var f=b.a,g=c.a,h=f.length,i=d.length;++e<h;){var j=a(f[e],g[e]);if(j){e=i>e?j*(d[e]?1:-1):j;break a}}e=b.b-c.b}return e})}function Fb(a,b){var c=0;return Me(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function Gb(a,b){var d=-1,e=sc(),f=a.length,g=e==c,h=g&&f>=200,i=h?Re():null,j=[];i?(e=Qa,g=!1):(h=!1,i=b?[]:j);a:for(;++d<f;){var k=a[d],l=b?b(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else 0>e(i,l,0)&&((b||h)&&i.push(l),j.push(k))}return j}function Hb(a,b){for(var c=-1,d=b.length,e=Hd(d);++c<d;)e[c]=a[b[c]];return e}function Ib(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Bb(a,d?0:f,d?f+1:e):Bb(a,d?f+1:0,d?e:f)}function Jb(a,b){var c=a;c instanceof Na&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var c=[c],f=b[d];ge.apply(c,f.args),c=f.func.apply(f.thisArg,c)}return c}function Kb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Ee>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return Lb(a,b,Cd,c)}function Lb(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=b===u;f>e;){var i=de((e+f)/2),j=c(a[i]),k=j===j;(g?k||d:h?k&&(d||j!==u):d?b>=j:b>j)?e=i+1:f=i}return ve(f,De)}function Mb(a,b,c){if("function"!=typeof a)return Cd;if(b===u)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function Nb(a){return ae.call(a,0)}function Ob(a,b,c){for(var d=c.length,e=-1,f=ue(a.length-d,0),g=-1,h=b.length,i=Hd(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function Pb(a,b,c){for(var d=-1,e=c.length,f=-1,g=ue(a.length-e,0),h=-1,i=b.length,j=Hd(g+i);++f<g;)j[f]=a[f];for(g=f;++h<i;)j[g+h]=b[h];for(;++d<e;)j[g+c[d]]=a[f++];return j}function Qb(a,b){return function(c,d,e){var f=b?b():{};if(d=rc(d,e,3),Gf(c)){e=-1;for(var g=c.length;++e<g;){var h=c[e];a(f,h,d(h,e,c),c)}}else Me(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function Rb(a){return gd(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2&&c[e-2],g=e>2&&c[2],h=e>1&&c[e-1];for("function"==typeof f?(f=Mb(f,h,5),e-=2):(f="function"==typeof h?h:null,e-=f?1:0),g&&zc(c[0],c[1],g)&&(f=3>e?null:f,e=1);++d<e;)(g=c[d])&&a(b,g,f);return b})}function Sb(a,b){return function(c,d){var e=c?Ue(c):0;if(!Cc(e))return a(c,d);for(var f=b?e:-1,g=Jc(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Tb(a){return function(b,c,d){var e=Jc(b);d=d(b);for(var f=d.length,g=a?f:-1;a?g--:++g<f;){var h=d[g];if(!1===c(e[h],h,e))break}return b}}function Ub(a,b){function c(){return(this&&this!==Ua&&this instanceof c?d:a).apply(b,arguments)}var d=Wb(a);return c}function Vb(a){return function(b){var c=-1;b=zd(ud(b));for(var d=b.length,e="";++c<d;)e=a(e,b[c],c);return e}}function Wb(a){return function(){var b=Le(a.prototype),c=a.apply(b,arguments);return kd(c)?c:b}}function Xb(a){function b(c,d,e){return e&&zc(c,d,e)&&(d=null),c=mc(c,a,null,null,null,null,null,d),c.placeholder=b.placeholder,c}return b}function Yb(a,b){return function(c,d,e){e&&zc(c,d,e)&&(d=null);var g=rc(),h=null==d;if(g===db&&h||(h=!1,d=g(d,e,3)),h){if(d=Gf(c),d||!od(c))return a(d?c:Ic(c));d=f}return qc(c,d,b)}}function Zb(a,c){return function(d,e,f){return e=rc(e,f,3),Gf(d)?(e=b(d,e,c),e>-1?d[e]:u):jb(d,e,a)}}function $b(a){return function(c,d,e){return c&&c.length?(d=rc(d,e,3),b(c,d,a)):-1}}function _b(a){return function(b,c,d){return c=rc(c,d,3),jb(b,c,a,!0)}}function ac(a){return function(){var b=arguments.length;if(!b)return function(){return arguments[0]};for(var c,d=a?b:-1,e=0,f=Hd(b);a?d--:++d<b;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Qd(M);var h=c?"":Te(g);c="wrapper"==h?new Ma([]):c}for(d=c?-1:b;++d<b;)g=f[d],h=Te(g),c=(e="wrapper"==h?Se(g):null)&&Bc(e[0])&&e[1]==(D|z|B|E)&&!e[4].length&&1==e[9]?c[Te(e[0])].apply(c,e[3]):1==g.length&&Bc(g)?c[h]():c.thru(g);return function(){var a=arguments;if(c&&1==a.length&&Gf(a[0]))return c.plant(a[0]).value();for(var d=0,a=f[d].apply(this,a);++d<b;)a=f[d].call(this,a);return a}}}function bc(a,b){return function(c,d,e){return"function"==typeof d&&e===u&&Gf(c)?a(c,d):b(c,Mb(d,e,3))}}function cc(a){return function(b,c,d){return("function"!=typeof c||d!==u)&&(c=Mb(c,d,3)),a(b,c,sd)}}function dc(a){return function(b,c,d){return("function"!=typeof c||d!==u)&&(c=Mb(c,d,3)),a(b,c)}}function ec(a){return function(b,c,d){var e={};return c=rc(c,d,3),mb(b,function(b,d,f){f=c(b,d,f),d=a?f:d,b=a?b:f,e[d]=b}),e}}function fc(a){return function(b,c,d){return b=e(b),(a?b:"")+jc(b,c,d)+(a?"":b)}}function gc(a){var b=gd(function(c,d){var e=p(d,b.placeholder);return mc(c,a,null,d,e)});return b}function hc(a,b){return function(c,d,e,f){var g=3>arguments.length;return"function"==typeof d&&f===u&&Gf(c)?a(c,d,e,g):Ab(c,rc(d,f,4),e,g,b)}}function ic(a,b,c,d,e,f,g,h,i,j){function k(){for(var v=arguments.length,y=v,z=Hd(v);y--;)z[y]=arguments[y];if(d&&(z=Ob(z,d,e)),f&&(z=Pb(z,f,g)),o||r){var y=k.placeholder,A=p(z,y),v=v-A.length;if(j>v){var D=h?Ra(h):null,v=ue(j-v,0),E=o?A:null,A=o?null:A,F=o?z:null,z=o?null:z;return b|=o?B:C,b&=~(o?C:B),q||(b&=~(w|x)),z=[a,b,c,F,E,z,A,D,i,v],D=ic.apply(u,z),Bc(a)&&We(D,z),D.placeholder=y,D}}if(y=m?c:this,n&&(a=y[t]),h)for(D=z.length,v=ve(h.length,D),E=Ra(z);v--;)A=h[v],z[v]=yc(A,D)?E[A]:u;return l&&i<z.length&&(z.length=i),(this&&this!==Ua&&this instanceof k?s||Wb(a):a).apply(y,z)}var l=b&D,m=b&w,n=b&x,o=b&z,q=b&y,r=b&A,s=!n&&Wb(a),t=a;return k}function jc(a,b,c){return a=a.length,b=+b,b>a&&se(b)?(b-=a,c=null==c?" ":c+"",xd(c,be(b/c.length)).slice(0,b)):""}function kc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Hd(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this&&this!==Ua&&this instanceof e?g:a).apply(f?c:this,k)}var f=b&w,g=Wb(a);return e}function lc(a){return function(b,c,d,e){var f=rc(d);return f===db&&null==d?Kb(b,c,a):Lb(b,c,f(d,e,1),a)}}function mc(a,b,c,d,e,f,g,h){var i=b&x;if(!i&&"function"!=typeof a)throw new Qd(M);var j=d?d.length:0;if(j||(b&=~(B|C),d=e=null),j-=e?e.length:0,b&C){var k=d,l=e;d=e=null}var m=i?null:Se(a);return c=[a,b,c,d,e,k,l,f,g,h],m&&(d=c[1],b=m[1],h=d|b,e=b==D&&d==z||b==D&&d==E&&c[7].length<=m[8]||b==(D|E)&&d==z,(D>h||e)&&(b&w&&(c[2]=m[2],h|=d&w?0:y),(d=m[3])&&(e=c[3],c[3]=e?Ob(e,d,m[4]):Ra(d),c[4]=e?p(c[3],N):Ra(m[4])),(d=m[5])&&(e=c[5],c[5]=e?Pb(e,d,m[6]):Ra(d),c[6]=e?p(c[5],N):Ra(m[6])),(d=m[7])&&(c[7]=Ra(d)),b&D&&(c[8]=null==c[8]?m[8]:ve(c[8],m[8])),null==c[9]&&(c[9]=m[9]),c[0]=m[0],c[1]=h),b=c[1],h=c[9]),c[9]=null==h?i?0:a.length:ue(h-j,0)||0,(m?Qe:We)(b==w?Ub(c[0],c[2]):b!=B&&b!=(w|B)||c[4].length?ic.apply(u,c):kc.apply(u,c),c)}function nc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&(!e||i>=j))return!1;for(;k&&++h<i;){var l=a[h],m=b[h],k=u;if(d&&(k=e?d(m,l,h):d(l,m,h)),k===u)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function oc(a,b,c){switch(c){case Q:case R:return+a==+b;case S:return a.name==b.name&&a.message==b.message;case U:return a!=+a?b!=+b:a==+b;case W:case X:return a==b+""}return!1}function pc(a,b,c,d,e,f,g){var h=Sf(a),i=h.length,j=Sf(b).length;if(i!=j&&!e)return!1;for(var j=e,k=-1;++k<i;){var l=h[k],m=e?l in b:Wd.call(b,l);if(m){var n=a[l],o=b[l],m=u;d&&(m=e?d(o,n,l):d(n,o,l)),m===u&&(m=n&&n===o||c(n,o,d,e,f,g))}if(!m)return!1;j||(j="constructor"==l)}return j||(c=a.constructor,d=b.constructor,!(c!=d&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)?!0:!1}function qc(a,b,c){var d=c?Be:Ae,e=d,f=e;return Me(a,function(a,g,h){g=b(a,g,h),((c?e>g:g>e)||g===d&&g===f)&&(e=g,f=a)}),f}function rc(a,b,c){var d=Ka.callback||Ad,d=d===Ad?db:d;return c?d(a,b,c):d}function sc(a,b,d){var e=Ka.indexOf||Pc,e=e===Pc?c:e;return a?e(a,b,d):e}function tc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Wd.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function uc(a){return a=a.constructor,"function"==typeof a&&a instanceof a||(a=Nd),new a}function vc(a,b,c){var d=a.constructor;switch(b){case Y:return Nb(a);case Q:case R:return new d(+a);case Z:case $:case _:case aa:case ba:case ca:case da:case ea:case fa:return b=a.buffer,new d(c?Nb(b):b,a.byteOffset,a.length);case U:case X:return new d(a);case W:var e=new d(a.source,ya.exec(a));e.lastIndex=a.lastIndex}return e}function wc(a,b,c){return null==a||Ac(b,a)||(b=Kc(b),a=1==b.length?a:pb(a,Bb(b,0,-1)),b=Qc(b)),b=null==a?a:a[b],null==b?u:b.apply(a,c)}function xc(a){return null!=a&&Cc(Ue(a))}function yc(a,b){return a=+a,b=null==b?Ge:b,a>-1&&0==a%1&&b>a}function zc(a,b,c){if(!kd(c))return!1;var d=typeof b;return("number"==d?xc(c)&&yc(b,c.length):"string"==d&&b in c)?(b=c[b],a===a?a===b:b!==b):!1}function Ac(a,b){var c=typeof a;return"string"==c&&ra.test(a)||"number"==c?!0:Gf(a)?!1:!qa.test(a)||null!=b&&a in Jc(b)}function Bc(a){var b=Te(a);return!!b&&a===Ka[b]&&b in Na.prototype}function Cc(a){return"number"==typeof a&&a>-1&&0==a%1&&Ge>=a}function Dc(a){return a===a&&!kd(a)}function Ec(a,b){a=Jc(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Fc(a,b){var c={};return lb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Gc(a){var b;if(!n(a)||Yd.call(a)!=V||!(Wd.call(a,"constructor")||(b=a.constructor,"function"!=typeof b||b instanceof b)))return!1;var c;return lb(a,function(a,b){c=b}),c===u||Wd.call(a,c)}function Hc(a){for(var b=sd(a),c=b.length,d=c&&a.length,e=Ka.support,e=d&&Cc(d)&&(Gf(a)||e.nonEnumArgs&&hd(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&yc(h,d)||Wd.call(a,h))&&g.push(h)}return g}function Ic(a){return null==a?[]:xc(a)?kd(a)?a:Nd(a):td(a)}function Jc(a){return kd(a)?a:Nd(a)}function Kc(a){if(Gf(a))return a;var b=[];return e(a).replace(sa,function(a,c,d,e){b.push(d?e.replace(wa,"$1"):c||a)}),b}function Lc(a){return a instanceof Na?a.clone():new Ma(a.__wrapped__,a.__chain__,Ra(a.__actions__))}function Mc(a,b,c){return a&&a.length?((c?zc(a,b,c):null==b)&&(b=1),Bb(a,0>b?0:b)):[]}function Nc(a,b,c){var d=a?a.length:0;return d?((c?zc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Bb(a,0,0>b?0:b)):[]}function Oc(a){return a?a[0]:u}function Pc(a,b,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?ue(e+d,0):d;else if(d)return d=Kb(a,b),a=a[d],(b===b?b===a:a!==a)?d:-1;return c(a,b,d||0)}function Qc(a){var b=a?a.length:0;return b?a[b-1]:u}function Rc(a){return Mc(a,1)}function Sc(a,b,d,e){if(!a||!a.length)return[];null!=b&&"boolean"!=typeof b&&(e=d,d=zc(a,b,e)?null:b,b=!1);var f=rc();if((f!==db||null!=d)&&(d=f(d,e,3)),b&&sc()==c){b=d;var g;d=-1,e=a.length;for(var f=-1,h=[];++d<e;){var i=a[d],j=b?b(i,d,a):i;d&&g===j||(g=j,h[++f]=i)}a=h}else a=Gb(a,d);return a}function Tc(a){if(!a||!a.length)return[];var b=-1,c=0;a=Wa(a,function(a){return xc(a)?(c=ue(a.length,c),!0):void 0});for(var d=Hd(c);++b<c;)d[b]=Xa(a,wb(b));return d}function Uc(a,b,c){return a&&a.length?(a=Tc(a),null==b?a:(b=Mb(b,c,4),Xa(a,function(a){return Ya(a,b,u,!0)}))):[]}function Vc(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Gf(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Wc(a){return a=Ka(a),a.__chain__=!0,a}function Xc(a,b,c){return b.call(c,a)}function Yc(a,b,c){var d=Gf(a)?Ta:hb;return c&&zc(a,b,c)&&(b=null),("function"!=typeof b||c!==u)&&(b=rc(b,c,3)),d(a,b)}function Zc(a,b,c){var d=Gf(a)?Wa:ib;return b=rc(b,c,3),d(a,b)}function $c(a,b,c,d){var e=a?Ue(a):0;return Cc(e)||(a=td(a),e=a.length),e?(c="number"!=typeof c||d&&zc(b,c,d)?0:0>c?ue(e+c,0):c||0,"string"==typeof a||!Gf(a)&&od(a)?e>c&&-1<a.indexOf(b,c):-1<sc(a,b,c)):!1}function _c(a,b,c){var d=Gf(a)?Xa:sb;return b=rc(b,c,3),d(a,b)}function ad(a,b,c){return(c?zc(a,b,c):null==b)?(a=Ic(a),b=a.length,b>0?a[zb(0,b-1)]:u):(a=bd(a),a.length=ve(0>b?0:+b||0,a.length),a)}function bd(a){a=Ic(a);for(var b=-1,c=a.length,d=Hd(c);++b<c;){var e=zb(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function cd(a,b,c){var d=Gf(a)?Za:Cb;return c&&zc(a,b,c)&&(b=null),("function"!=typeof b||c!==u)&&(b=rc(b,c,3)),d(a,b)}function dd(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Qd(M);var d=a;a=b,b=d}return function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}}function ed(a,b,c){function d(){var c=b-(tf()-j);0>=c||c>b?(h&&ce(h),c=m,h=l=m=u,c&&(n=tf(),i=a.apply(k,g),l||h||(g=k=null))):l=ke(d,c)}function e(){l&&ce(l),h=l=m=u,(p||o!==b)&&(n=tf(),i=a.apply(k,g),l||h||(g=k=null))}function f(){if(g=arguments,j=tf(),k=this,m=p&&(l||!q),!1===o)var c=q&&!l;else{h||q||(n=j);var f=o-(j-n),r=0>=f||f>o;r?(h&&(h=ce(h)),n=j,i=a.apply(k,g)):h||(h=ke(e,f))}return r&&l?l=ce(l):l||b===o||(l=ke(d,b)),c&&(r=!0,i=a.apply(k,g)),!r||l||h||(g=k=null),i}var g,h,i,j,k,l,m,n=0,o=!1,p=!0;if("function"!=typeof a)throw new Qd(M);if(b=0>b?0:+b||0,!0===c)var q=!0,p=!1;else kd(c)&&(q=c.leading,o="maxWait"in c&&ue(+c.maxWait||0,b),p="trailing"in c?c.trailing:p);return f.cancel=function(){l&&ce(l),h&&ce(h),h=l=m=u},f}function fd(a,b){function c(){var d=arguments,e=c.cache,f=b?b.apply(this,d):d[0];return e.has(f)?e.get(f):(d=a.apply(this,d),e.set(f,d),d)}if("function"!=typeof a||b&&"function"!=typeof b)throw new Qd(M);return c.cache=new fd.Cache,c}function gd(a,b){if("function"!=typeof a)throw new Qd(M);return b=ue(b===u?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=ue(c.length-b,0),f=Hd(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}for(e=Hd(b+1),d=-1;++d<b;)e[d]=c[d];return e[b]=f,a.apply(this,e)}}function hd(a){return n(a)&&xc(a)&&Yd.call(a)==O}function id(a){return!!a&&1===a.nodeType&&n(a)&&-1<Yd.call(a).indexOf("Element")}function jd(a){return n(a)&&"string"==typeof a.message&&Yd.call(a)==S}function kd(a){var b=typeof a;return"function"==b||!!a&&"object"==b}function ld(a){return null==a?!1:Yd.call(a)==T?$d.test(Vd.call(a)):n(a)&&Aa.test(a)}function md(a){return"number"==typeof a||n(a)&&Yd.call(a)==U}function nd(a){return n(a)&&Yd.call(a)==W}function od(a){return"string"==typeof a||n(a)&&Yd.call(a)==X}function pd(a){return n(a)&&Cc(a.length)&&!!Ha[Yd.call(a)]}function qd(a){return cb(a,sd(a))}function rd(a){return ob(a,sd(a))}function sd(a){if(null==a)return[];kd(a)||(a=Nd(a));for(var b=a.length,b=b&&Cc(b)&&(Gf(a)||Je.nonEnumArgs&&hd(a))&&b||0,c=a.constructor,d=-1,c="function"==typeof c&&c.prototype===a,e=Hd(b),f=b>0;++d<b;)e[d]=d+"";for(var g in a)f&&yc(g,b)||"constructor"==g&&(c||!Wd.call(a,g))||e.push(g);return e}function td(a){return Hb(a,Sf(a))}function ud(a){return(a=e(a))&&a.replace(Ba,j).replace(va,"")}function vd(a){return(a=e(a))&&ua.test(a)?a.replace(ta,"\\$&"):a}function wd(a,b,c){return c&&zc(a,b,c)&&(b=0),ye(a,b)}function xd(a,b){var c="";if(a=e(a),b=+b,1>b||!a||!se(b))return c;do b%2&&(c+=a),b=de(b/2),a+=a;while(b);return c}function yd(a,b,c){var d=a;return(a=e(a))?(c?zc(d,b,c):null==b)?a.slice(q(a),r(a)+1):(b+="",a.slice(g(a,b),h(a,b)+1)):a}function zd(a,b,c){return c&&zc(a,b,c)&&(b=null),a=e(a),a.match(b||Ea)||[]}function Ad(a,b,c){return c&&zc(a,b,c)&&(b=null),n(a)?Dd(a):db(a,b)}function Bd(a){return function(){return a}}function Cd(a){return a}function Dd(a){return tb(eb(a,!0))}function Ed(a,b,c){if(null==c){var d=kd(b),e=d&&Sf(b);((e=e&&e.length&&ob(b,e))?e.length:d)||(e=!1,c=b,b=a,a=this)}e||(e=ob(b,Sf(b)));var f=!0,d=-1,g=If(a),h=e.length;!1===c?f=!1:kd(c)&&"chain"in c&&(f=c.chain);for(;++d<h;){c=e[d];var i=b[c];a[c]=i,g&&(a.prototype[c]=function(b){return function(){var c=this.__chain__;if(f||c){var d=a(this.__wrapped__);return(d.__actions__=Ra(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return c=[this.value()],ge.apply(c,arguments),b.apply(a,c)}}(i))}return a}function Fd(){}function Gd(a){return Ac(a)?wb(a):xb(a)}o=o?Va.defaults(Ua.Object(),o,Va.pick(Ua,Ga)):Ua;var Hd=o.Array,Id=o.Date,Jd=o.Error,Kd=o.Function,Ld=o.Math,Md=o.Number,Nd=o.Object,Od=o.RegExp,Pd=o.String,Qd=o.TypeError,Rd=Hd.prototype,Sd=Nd.prototype,Td=Pd.prototype,Ud=(Ud=o.window)&&Ud.document,Vd=Kd.prototype.toString,Wd=Sd.hasOwnProperty,Xd=0,Yd=Sd.toString,Zd=o._,$d=Od("^"+vd(Yd).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_d=ld(_d=o.ArrayBuffer)&&_d,ae=ld(ae=_d&&new _d(0).slice)&&ae,be=Ld.ceil,ce=o.clearTimeout,de=Ld.floor,ee=ld(ee=Nd.getOwnPropertySymbols)&&ee,fe=ld(fe=Nd.getPrototypeOf)&&fe,ge=Rd.push,he=ld(he=Nd.preventExtensions)&&he,ie=Sd.propertyIsEnumerable,je=ld(je=o.Set)&&je,ke=o.setTimeout,le=Rd.splice,me=ld(me=o.Uint8Array)&&me,ne=ld(ne=o.WeakMap)&&ne,oe=function(){try{var a=ld(a=o.Float64Array)&&a,b=new a(new _d(10),0,1)&&a}catch(c){}return b}(),pe=function(){var a=he&&ld(a=Nd.assign)&&a;try{if(a){var b=he({1:0});b[0]=1}}catch(c){try{a(b,"xo")}catch(d){}return!b[1]&&a}return!1}(),qe=ld(qe=Hd.isArray)&&qe,re=ld(re=Nd.create)&&re,se=o.isFinite,te=ld(te=Nd.keys)&&te,ue=Ld.max,ve=Ld.min,we=ld(we=Id.now)&&we,xe=ld(xe=Md.isFinite)&&xe,ye=o.parseInt,ze=Ld.random,Ae=Md.NEGATIVE_INFINITY,Be=Md.POSITIVE_INFINITY,Ce=Ld.pow(2,32)-1,De=Ce-1,Ee=Ce>>>1,Fe=oe?oe.BYTES_PER_ELEMENT:0,Ge=Ld.pow(2,53)-1,He=ne&&new ne,Ie={},Je=Ka.support={};!function(a){function b(){this.x=a}var c=arguments,d=[];b.prototype={valueOf:a,y:a};for(var e in new b)d.push(e);Je.funcDecomp=/\bthis\b/.test(function(){return this}),Je.funcNames="string"==typeof Kd.name;try{Je.dom=11===Ud.createDocumentFragment().nodeType}catch(f){Je.dom=!1}try{Je.nonEnumArgs=!ie.call(c,1)}catch(g){Je.nonEnumArgs=!0}}(1,0),Ka.templateSettings={escape:na,evaluate:oa,interpolate:pa,variable:"",imports:{_:Ka}};var Ke=pe||function(a,b){return null==b?a:cb(b,Ve(b),cb(b,Sf(b),a))},Le=function(){function a(){}return function(b){if(kd(b)){a.prototype=b;var c=new a;a.prototype=null}return c||o.Object()}}(),Me=Sb(mb),Ne=Sb(nb,!0),Oe=Tb(),Pe=Tb(!0),Qe=He?function(a,b){return He.set(a,b),a}:Cd;ae||(Nb=_d&&me?function(a){var b=a.byteLength,c=oe?de(b/Fe):0,d=c*Fe,e=new _d(b);if(c){var f=new oe(e,0,c);f.set(new oe(a,0,c))}return b!=d&&(f=new me(e,d),f.set(new me(a,d))),e}:Bd(null));var Re=re&&je?function(a){return new Pa(a)}:Bd(null),Se=He?function(a){return He.get(a)}:Fd,Te=function(){return Je.funcNames?"constant"==Bd.name?wb("name"):function(a){for(var b=a.name,c=Ie[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}:Bd("")}(),Ue=wb("length"),Ve=ee?function(a){return ee(Jc(a))}:Bd([]),We=function(){var a=0,b=0;return function(c,d){var e=tf(),f=I-(e-b);if(b=e,f>0){if(++a>=H)return c}else a=0;return Qe(c,d)}}(),Xe=gd(function(a,b){return xc(a)?gb(a,kb(b,!1,!0)):[]}),Ye=$b(),Ze=$b(!0),$e=gd(function(b,c){c=kb(c);var d=bb(b,c);return yb(b,c.sort(a)),d}),_e=lc(),af=lc(!0),bf=gd(function(a){return Gb(kb(a,!1,!0))}),cf=gd(function(a,b){return xc(a)?gb(a,b):[]}),df=gd(Tc),ef=gd(function(a){var b=a.length,c=a[b-2],d=a[b-1];return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):u,d=u),a.length=b,Uc(a,c,d)}),ff=gd(function(a,b){return bb(a,kb(b))}),gf=Qb(function(a,b,c){Wd.call(a,c)?++a[c]:a[c]=1}),hf=Zb(Me),jf=Zb(Ne,!0),kf=bc(Sa,Me),lf=bc(function(a,b){for(var c=a.length;c--&&!1!==b(a[c],c,a););return a},Ne),mf=Qb(function(a,b,c){Wd.call(a,c)?a[c].push(b):a[c]=[b]}),nf=Qb(function(a,b,c){a[c]=b}),of=gd(function(a,b,c){var d=-1,e="function"==typeof b,f=Ac(b),g=xc(a)?Hd(a.length):[];return Me(a,function(a){var h=e?b:f&&null!=a&&a[b];g[++d]=h?h.apply(a,c):wc(a,b,c)}),g}),pf=Qb(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),qf=hc(Ya,Me),rf=hc(function(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c},Ne),sf=gd(function(a,b){if(null==a)return[];var c=b[2];return c&&zc(b[0],b[1],c)&&(b.length=1),Eb(a,kb(b),[])}),tf=we||function(){return(new Id).getTime()},uf=gd(function(a,b,c){var d=w;if(c.length)var e=p(c,uf.placeholder),d=d|B;return mc(a,d,b,c,e)}),vf=gd(function(a,b){b=b.length?kb(b):rd(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=mc(a[e],w,a)}return a}),wf=gd(function(a,b,c){var d=w|x;if(c.length)var e=p(c,wf.placeholder),d=d|B;return mc(b,d,a,c,e)}),xf=Xb(z),yf=Xb(A),zf=gd(function(a,b){return fb(a,1,b)}),Af=gd(function(a,b,c){return fb(a,b,c)}),Bf=ac(),Cf=ac(!0),Df=gc(B),Ef=gc(C),Ff=gd(function(a,b){return mc(a,E,null,null,null,kb(b))}),Gf=qe||function(a){return n(a)&&Cc(a.length)&&Yd.call(a)==P};Je.dom||(id=function(a){return!!a&&1===a.nodeType&&n(a)&&!Jf(a)});var Hf=xe||function(a){return"number"==typeof a&&se(a)},If=d(/x/)||me&&!d(me)?function(a){return Yd.call(a)==T}:d,Jf=fe?function(a){if(!a||Yd.call(a)!=V)return!1;var b=a.valueOf,c=ld(b)&&(c=fe(b))&&fe(c);return c?a==c||fe(a)==c:Gc(a)}:Gc,Kf=Rb(function(a,b,c){return c?ab(a,b,c):Ke(a,b)}),Lf=gd(function(a){var b=a[0];return null==b?b:(a.push($a),Kf.apply(u,a))}),Mf=_b(mb),Nf=_b(nb),Of=cc(Oe),Pf=cc(Pe),Qf=dc(mb),Rf=dc(nb),Sf=te?function(a){var b=null!=a&&a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&xc(a)?Hc(a):kd(a)?te(a):[]}:Hc,Tf=ec(!0),Uf=ec(),Vf=Rb(vb),Wf=gd(function(a,b){if(null==a)return{};if("function"!=typeof b[0])return b=Xa(kb(b),Pd),Ec(a,gb(sd(a),b));var c=Mb(b[0],b[1],3);return Fc(a,function(a,b,d){return!c(a,b,d)})}),Xf=gd(function(a,b){return null==a?{}:"function"==typeof b[0]?Fc(a,Mb(b[0],b[1],3)):Ec(a,kb(b))}),Yf=Vb(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Zf=Vb(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),$f=fc(),_f=fc(!0);8!=ye(Fa+"08")&&(wd=function(a,b,c){return(c?zc(a,b,c):null==b)?b=0:b&&(b=+b),a=yd(a),ye(a,b||(za.test(a)?16:10))});var ag=Vb(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),bg=Vb(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),cg=gd(function(a,b){try{return a.apply(u,b)}catch(c){return jd(c)?c:new Jd(c)}}),dg=gd(function(a,b){return function(c){return wc(c,a,b)}}),eg=gd(function(a,b){return function(c){return wc(a,c,b)}}),fg=Yb(function(a){for(var b=-1,c=a.length,d=Ae;++b<c;){var e=a[b];e>d&&(d=e)}return d}),gg=Yb(function(a){for(var b=-1,c=a.length,d=Be;++b<c;){var e=a[b];d>e&&(d=e)}return d},!0);return Ka.prototype=La.prototype,Ma.prototype=Le(La.prototype),Ma.prototype.constructor=Ma,Na.prototype=Le(La.prototype),Na.prototype.constructor=Na,Oa.prototype["delete"]=function(a){return this.has(a)&&delete this.__data__[a]},Oa.prototype.get=function(a){return"__proto__"==a?u:this.__data__[a]},Oa.prototype.has=function(a){return"__proto__"!=a&&Wd.call(this.__data__,a)},Oa.prototype.set=function(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this},Pa.prototype.push=function(a){var b=this.data;"string"==typeof a||kd(a)?b.set.add(a):b.hash[a]=!0},fd.Cache=Oa,Ka.after=function(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Qd(M);var c=a;a=b,b=c}return a=se(a=+a)?a:0,function(){return 1>--a?b.apply(this,arguments):void 0}},Ka.ary=function(a,b,c){return c&&zc(a,b,c)&&(b=null),b=a&&null==b?a.length:ue(+b||0,0),mc(a,D,null,null,null,null,b)},Ka.assign=Kf,Ka.at=ff,Ka.before=dd,Ka.bind=uf,Ka.bindAll=vf,Ka.bindKey=wf,Ka.callback=Ad,Ka.chain=Wc,Ka.chunk=function(a,b,c){b=(c?zc(a,b,c):null==b)?1:ue(+b||1,1),c=0;for(var d=a?a.length:0,e=-1,f=Hd(be(d/b));d>c;)f[++e]=Bb(a,c,c+=b);return f},Ka.compact=function(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e},Ka.constant=Bd,Ka.countBy=gf,Ka.create=function(a,b,c){var d=Le(a);return c&&zc(a,b,c)&&(b=null),b?Ke(d,b):d},Ka.curry=xf,Ka.curryRight=yf,Ka.debounce=ed,Ka.defaults=Lf,Ka.defer=zf,Ka.delay=Af,Ka.difference=Xe,Ka.drop=Mc,Ka.dropRight=Nc,Ka.dropRightWhile=function(a,b,c){return a&&a.length?Ib(a,rc(b,c,3),!0,!0):[]},Ka.dropWhile=function(a,b,c){return a&&a.length?Ib(a,rc(b,c,3),!0):[]},Ka.fill=function(a,b,c,d){var e=a?a.length:0;if(!e)return[];for(c&&"number"!=typeof c&&zc(a,b,c)&&(c=0,d=e),e=a.length,c=null==c?0:+c||0,0>c&&(c=-c>e?0:e+c),d=d===u||d>e?e:+d||0,0>d&&(d+=e),e=c>d?0:d>>>0,c>>>=0;e>c;)a[c++]=b;return a},Ka.filter=Zc,Ka.flatten=function(a,b,c){var d=a?a.length:0;return c&&zc(a,b,c)&&(b=!1),d?kb(a,b):[]},Ka.flattenDeep=function(a){return a&&a.length?kb(a,!0):[]},Ka.flow=Bf,Ka.flowRight=Cf,Ka.forEach=kf,Ka.forEachRight=lf,Ka.forIn=Of,Ka.forInRight=Pf,Ka.forOwn=Qf,Ka.forOwnRight=Rf,Ka.functions=rd,Ka.groupBy=mf,Ka.indexBy=nf,Ka.initial=function(a){return Nc(a,1)},Ka.intersection=function(){for(var a=[],b=-1,d=arguments.length,e=[],f=sc(),g=f==c,h=[];++b<d;){var i=arguments[b];xc(i)&&(a.push(i),
e.push(g&&120<=i.length?Re(b&&i):null))}if(d=a.length,2>d)return h;var g=a[0],j=-1,k=g?g.length:0,l=e[0];a:for(;++j<k;)if(i=g[j],0>(l?Qa(l,i):f(h,i,0))){for(b=d;--b;){var m=e[b];if(0>(m?Qa(m,i):f(a[b],i,0)))continue a}l&&l.push(i),h.push(i)}return h},Ka.invert=function(a,b,c){c&&zc(a,b,c)&&(b=null),c=-1;for(var d=Sf(a),e=d.length,f={};++c<e;){var g=d[c],h=a[g];b?Wd.call(f,h)?f[h].push(g):f[h]=[g]:f[h]=g}return f},Ka.invoke=of,Ka.keys=Sf,Ka.keysIn=sd,Ka.map=_c,Ka.mapKeys=Tf,Ka.mapValues=Uf,Ka.matches=Dd,Ka.matchesProperty=function(a,b){return ub(a,eb(b,!0))},Ka.memoize=fd,Ka.merge=Vf,Ka.method=dg,Ka.methodOf=eg,Ka.mixin=Ed,Ka.negate=function(a){if("function"!=typeof a)throw new Qd(M);return function(){return!a.apply(this,arguments)}},Ka.omit=Wf,Ka.once=function(a){return dd(2,a)},Ka.pairs=function(a){for(var b=-1,c=Sf(a),d=c.length,e=Hd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},Ka.partial=Df,Ka.partialRight=Ef,Ka.partition=pf,Ka.pick=Xf,Ka.pluck=function(a,b){return _c(a,Gd(b))},Ka.property=Gd,Ka.propertyOf=function(a){return function(b){return pb(a,Kc(b),b+"")}},Ka.pull=function(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=sc(),e=a.length;++c<e;)for(var f=0,g=a[c];-1<(f=d(b,g,f));)le.call(b,f,1);return b},Ka.pullAt=$e,Ka.range=function(a,b,c){c&&zc(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;var d=-1;b=ue(be((b-a)/(c||1)),0);for(var e=Hd(b);++d<b;)e[d]=a,a+=c;return e},Ka.rearg=Ff,Ka.reject=function(a,b,c){var d=Gf(a)?Wa:ib;return b=rc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})},Ka.remove=function(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=rc(b,c,3);++e<g;)c=a[e],b(c,e,a)&&(d.push(c),f.push(e));return yb(a,f),d},Ka.rest=Rc,Ka.restParam=gd,Ka.set=function(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||Ac(b,a)?[d]:Kc(b);for(var d=-1,e=b.length,f=e-1,g=a;null!=g&&++d<e;){var h=b[d];kd(g)&&(d==f?g[h]=c:null==g[h]&&(g[h]=yc(b[d+1])?[]:{})),g=g[h]}return a},Ka.shuffle=bd,Ka.slice=function(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&zc(a,b,c)&&(b=0,c=d),Bb(a,b,c)):[]},Ka.sortBy=function(a,b,c){if(null==a)return[];c&&zc(a,b,c)&&(b=null);var d=-1;return b=rc(b,c,3),a=sb(a,function(a,c,e){return{a:b(a,c,e),b:++d,c:a}}),Db(a,i)},Ka.sortByAll=sf,Ka.sortByOrder=function(a,b,c,d){return null==a?[]:(d&&zc(b,c,d)&&(c=null),Gf(b)||(b=null==b?[]:[b]),Gf(c)||(c=null==c?[]:[c]),Eb(a,b,c))},Ka.spread=function(a){if("function"!=typeof a)throw new Qd(M);return function(b){return a.apply(this,b)}},Ka.take=function(a,b,c){return a&&a.length?((c?zc(a,b,c):null==b)&&(b=1),Bb(a,0,0>b?0:b)):[]},Ka.takeRight=function(a,b,c){var d=a?a.length:0;return d?((c?zc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Bb(a,0>b?0:b)):[]},Ka.takeRightWhile=function(a,b,c){return a&&a.length?Ib(a,rc(b,c,3),!1,!0):[]},Ka.takeWhile=function(a,b,c){return a&&a.length?Ib(a,rc(b,c,3)):[]},Ka.tap=function(a,b,c){return b.call(c,a),a},Ka.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Qd(M);return!1===c?d=!1:kd(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Ja.leading=d,Ja.maxWait=+b,Ja.trailing=e,ed(a,b,Ja)},Ka.thru=Xc,Ka.times=function(a,b,c){if(a=de(a),1>a||!se(a))return[];var d=-1,e=Hd(ve(a,Ce));for(b=Mb(b,c,1);++d<a;)Ce>d?e[d]=b(d):b(d);return e},Ka.toArray=function(a){var b=a?Ue(a):0;return Cc(b)?b?Ra(a):[]:td(a)},Ka.toPlainObject=qd,Ka.transform=function(a,b,c,d){var e=Gf(a)||pd(a);return b=rc(b,d,4),null==c&&(e||kd(a)?(d=a.constructor,c=e?Gf(a)?new d:[]:Le(If(d)&&d.prototype)):c={}),(e?Sa:mb)(a,function(a,d,e){return b(c,a,d,e)}),c},Ka.union=bf,Ka.uniq=Sc,Ka.unzip=Tc,Ka.unzipWith=Uc,Ka.values=td,Ka.valuesIn=function(a){return Hb(a,sd(a))},Ka.where=function(a,b){return Zc(a,tb(b))},Ka.without=cf,Ka.wrap=function(a,b){return b=null==b?Cd:b,mc(b,B,null,[a],[])},Ka.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(xc(c))var d=d?gb(d,c).concat(gb(c,d)):c}return d?Gb(d):[]},Ka.zip=df,Ka.zipObject=Vc,Ka.zipWith=ef,Ka.backflow=Cf,Ka.collect=_c,Ka.compose=Cf,Ka.each=kf,Ka.eachRight=lf,Ka.extend=Kf,Ka.iteratee=Ad,Ka.methods=rd,Ka.object=Vc,Ka.select=Zc,Ka.tail=Rc,Ka.unique=Sc,Ed(Ka,Ka),Ka.add=function(a,b){return(+a||0)+(+b||0)},Ka.attempt=cg,Ka.camelCase=Yf,Ka.capitalize=function(a){return(a=e(a))&&a.charAt(0).toUpperCase()+a.slice(1)},Ka.clone=function(a,b,c,d){return b&&"boolean"!=typeof b&&zc(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),c="function"==typeof c&&Mb(c,d,1),eb(a,b,c)},Ka.cloneDeep=function(a,b,c){return b="function"==typeof b&&Mb(b,c,1),eb(a,!0,b)},Ka.deburr=ud,Ka.endsWith=function(a,b,c){a=e(a),b+="";var d=a.length;return c=c===u?d:ve(0>c?0:+c||0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c},Ka.escape=function(a){return(a=e(a))&&ma.test(a)?a.replace(ka,k):a},Ka.escapeRegExp=vd,Ka.every=Yc,Ka.find=hf,Ka.findIndex=Ye,Ka.findKey=Mf,Ka.findLast=jf,Ka.findLastIndex=Ze,Ka.findLastKey=Nf,Ka.findWhere=function(a,b){return hf(a,tb(b))},Ka.first=Oc,Ka.get=function(a,b,c){return a=null==a?u:pb(a,Kc(b),b+""),a===u?c:a},Ka.has=function(a,b){if(null==a)return!1;var c=Wd.call(a,b);return c||Ac(b)||(b=Kc(b),a=1==b.length?a:pb(a,Bb(b,0,-1)),b=Qc(b),c=null!=a&&Wd.call(a,b)),c},Ka.identity=Cd,Ka.includes=$c,Ka.indexOf=Pc,Ka.inRange=function(a,b,c){return b=+b||0,"undefined"==typeof c?(c=b,b=0):c=+c||0,a>=ve(b,c)&&a<ue(b,c)},Ka.isArguments=hd,Ka.isArray=Gf,Ka.isBoolean=function(a){return!0===a||!1===a||n(a)&&Yd.call(a)==Q},Ka.isDate=function(a){return n(a)&&Yd.call(a)==R},Ka.isElement=id,Ka.isEmpty=function(a){return null==a?!0:xc(a)&&(Gf(a)||od(a)||hd(a)||n(a)&&If(a.splice))?!a.length:!Sf(a).length},Ka.isEqual=function(a,b,c,d){return c="function"==typeof c&&Mb(c,d,3),!c&&Dc(a)&&Dc(b)?a===b:(d=c?c(a,b):u,d===u?qb(a,b,c):!!d)},Ka.isError=jd,Ka.isFinite=Hf,Ka.isFunction=If,Ka.isMatch=function(a,b,c,d){var e=Sf(b),f=e.length;if(!f)return!0;if(null==a)return!1;if(c="function"==typeof c&&Mb(c,d,3),a=Jc(a),!c&&1==f){var g=e[0];if(d=b[g],Dc(d))return d===a[g]&&(d!==u||g in a)}for(var g=Hd(f),h=Hd(f);f--;)d=g[f]=b[e[f]],h[f]=Dc(d);return rb(a,e,g,h,c)},Ka.isNaN=function(a){return md(a)&&a!=+a},Ka.isNative=ld,Ka.isNull=function(a){return null===a},Ka.isNumber=md,Ka.isObject=kd,Ka.isPlainObject=Jf,Ka.isRegExp=nd,Ka.isString=od,Ka.isTypedArray=pd,Ka.isUndefined=function(a){return a===u},Ka.kebabCase=Zf,Ka.last=Qc,Ka.lastIndexOf=function(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?ue(d+c,0):ve(c||0,d-1))+1;else if(c)return e=Kb(a,b,!0)-1,a=a[e],(b===b?b===a:a!==a)?e:-1;if(b!==b)return m(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1},Ka.max=fg,Ka.min=gg,Ka.noConflict=function(){return o._=Zd,this},Ka.noop=Fd,Ka.now=tf,Ka.pad=function(a,b,c){a=e(a),b=+b;var d=a.length;return b>d&&se(b)?(d=(b-d)/2,b=de(d),d=be(d),c=jc("",d,c),c.slice(0,b)+a+c):a},Ka.padLeft=$f,Ka.padRight=_f,Ka.parseInt=wd,Ka.random=function(a,b,c){c&&zc(a,b,c)&&(b=c=null);var d=null==a,e=null==b;return null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=ze(),ve(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):zb(a,b)},Ka.reduce=qf,Ka.reduceRight=rf,Ka.repeat=xd,Ka.result=function(a,b,c){var d=null==a?u:a[b];return d===u&&(null==a||Ac(b,a)||(b=Kc(b),a=1==b.length?a:pb(a,Bb(b,0,-1)),d=null==a?u:a[Qc(b)]),d=d===u?c:d),If(d)?d.call(a):d},Ka.runInContext=t,Ka.size=function(a){var b=a?Ue(a):0;return Cc(b)?b:Sf(a).length},Ka.snakeCase=ag,Ka.some=cd,Ka.sortedIndex=_e,Ka.sortedLastIndex=af,Ka.startCase=bg,Ka.startsWith=function(a,b,c){return a=e(a),c=null==c?0:ve(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c},Ka.sum=function(a,b,c){c&&zc(a,b,c)&&(b=null);var d=rc(),e=null==b;if(d===db&&e||(e=!1,b=d(b,c,3)),e){for(a=Gf(a)?a:Ic(a),b=a.length,c=0;b--;)c+=+a[b]||0;a=c}else a=Fb(a,b);return a},Ka.template=function(a,b,c){var d=Ka.templateSettings;c&&zc(a,b,c)&&(b=c=null),a=e(a),b=ab(Ke({},c||b),d,_a),c=ab(Ke({},b.imports),d.imports,_a);var f,g,h=Sf(c),i=Hb(c,h),j=0;c=b.interpolate||Ca;var k="__p+='";c=Od((b.escape||Ca).source+"|"+c.source+"|"+(c===pa?xa:Ca).source+"|"+(b.evaluate||Ca).source+"|$","g");var m="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,c,d,e,h,i){return d||(d=e),k+=a.slice(j,i).replace(Da,l),c&&(f=!0,k+="'+__e("+c+")+'"),h&&(g=!0,k+="';"+h+";\n__p+='"),d&&(k+="'+((__t=("+d+"))==null?'':__t)+'"),j=i+b.length,b}),k+="';",(b=b.variable)||(k="with(obj){"+k+"}"),k=(g?k.replace(ga,""):k).replace(ha,"$1").replace(ia,"$1;"),k="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(g?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+k+"return __p}",b=cg(function(){return Kd(h,m+"return "+k).apply(u,i)}),b.source=k,jd(b))throw b;return b},Ka.trim=yd,Ka.trimLeft=function(a,b,c){var d=a;return(a=e(a))?a.slice((c?zc(d,b,c):null==b)?q(a):g(a,b+"")):a},Ka.trimRight=function(a,b,c){var d=a;return(a=e(a))?(c?zc(d,b,c):null==b)?a.slice(0,r(a)+1):a.slice(0,h(a,b+"")+1):a},Ka.trunc=function(a,b,c){c&&zc(a,b,c)&&(b=null);var d=F;if(c=G,null!=b)if(kd(b)){var f="separator"in b?b.separator:f,d="length"in b?+b.length||0:d;c="omission"in b?e(b.omission):c}else d=+b||0;if(a=e(a),d>=a.length)return a;if(d-=c.length,1>d)return c;if(b=a.slice(0,d),null==f)return b+c;if(nd(f)){if(a.slice(d).search(f)){var g,h=a.slice(0,d);for(f.global||(f=Od(f.source,(ya.exec(f)||"")+"g")),f.lastIndex=0;a=f.exec(h);)g=a.index;b=b.slice(0,null==g?d:g)}}else a.indexOf(f,d)!=d&&(f=b.lastIndexOf(f),f>-1&&(b=b.slice(0,f)));return b+c},Ka.unescape=function(a){return(a=e(a))&&la.test(a)?a.replace(ja,s):a},Ka.uniqueId=function(a){var b=++Xd;return e(a)+b},Ka.words=zd,Ka.all=Yc,Ka.any=cd,Ka.contains=$c,Ka.detect=hf,Ka.foldl=qf,Ka.foldr=rf,Ka.head=Oc,Ka.include=$c,Ka.inject=qf,Ed(Ka,function(){var a={};return mb(Ka,function(b,c){Ka.prototype[c]||(a[c]=b)}),a}(),!1),Ka.sample=ad,Ka.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return ad(b,a)}):ad(this.value())},Ka.VERSION=v,Sa("bind bindKey curry curryRight partial partialRight".split(" "),function(a){Ka[a].placeholder=Ka}),Sa(["dropWhile","filter","map","takeWhile"],function(a,b){var c=b!=L,d=b==J;Na.prototype[a]=function(a,e){var f=this.__filtered__,g=f&&d?new Na(this):this.clone();return(g.__iteratees__||(g.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:rc(a,e,1),limit:-1,type:b}),g.__filtered__=f||c,g}}),Sa(["drop","take"],function(a,b){var c=a+"While";Na.prototype[a]=function(c){var d=this.__filtered__,e=d&&!b?this.dropWhile():this.clone();return c=null==c?1:ue(de(c)||0,0),d?b?e.__takeCount__=ve(e.__takeCount__,c):Qc(e.__iteratees__).limit=c:(e.__views__||(e.__views__=[])).push({size:c,type:a+(0>e.__dir__?"Right":"")}),e},Na.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},Na.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[c](a,b).reverse()}}),Sa(["first","last"],function(a,b){var c="take"+(b?"Right":"");Na.prototype[a]=function(){return this[c](1).value()[0]}}),Sa(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Na.prototype[a]=function(){return this[c](1)}}),Sa(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?tb:Gd;Na.prototype[a]=function(a){return this[c](d(a))}}),Na.prototype.compact=function(){return this.filter(Cd)},Na.prototype.reject=function(a,b){return a=rc(a,b,1),this.filter(function(b){return!a(b)})},Na.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return 0>a?c=this.takeRight(-a):a&&(c=this.drop(a)),b!==u&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Na.prototype.toArray=function(){return this.drop(0)},mb(Na.prototype,function(a,b){var c=Ka[b];if(c){var d=/^(?:filter|map|reject)|While$/.test(b),e=/^(?:first|last)$/.test(b);Ka.prototype[b]=function(){function b(a){return a=[a],ge.apply(a,f),c.apply(Ka,a)}var f=arguments,g=this.__chain__,h=this.__wrapped__,i=!!this.__actions__.length,j=h instanceof Na,k=f[0],l=j||Gf(h);return l&&d&&"function"==typeof k&&1!=k.length&&(j=l=!1),j=j&&!i,e&&!g?j?a.call(h):c.call(Ka,this.value()):l?(h=a.apply(j?h:new Na(this),f),e||!i&&!h.__actions__||(h.__actions__||(h.__actions__=[])).push({func:Xc,args:[b],thisArg:Ka}),new Ma(h,g)):this.thru(b)}}}),Sa("concat join pop push replace shift sort splice split unshift".split(" "),function(a){var b=(/^(?:replace|split)$/.test(a)?Td:Rd)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);Ka.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),mb(Na.prototype,function(a,b){var c=Ka[b];if(c){var d=c.name;(Ie[d]||(Ie[d]=[])).push({name:b,func:c})}}),Ie[ic(null,x).name]=[{name:"wrapper",func:null}],Na.prototype.clone=function(){var a=this.__actions__,b=this.__iteratees__,c=this.__views__,d=new Na(this.__wrapped__);return d.__actions__=a?Ra(a):null,d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=b?Ra(b):null,d.__takeCount__=this.__takeCount__,d.__views__=c?Ra(c):null,d},Na.prototype.reverse=function(){if(this.__filtered__){var a=new Na(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Na.prototype.value=function(){var a=this.__wrapped__.value();if(!Gf(a))return Jb(a,this.__actions__);var b,c=this.__dir__,d=0>c;b=a.length;for(var e=this.__views__,f=0,g=-1,h=e?e.length:0;++g<h;){var i=e[g],j=i.size;switch(i.type){case"drop":f+=j;break;case"dropRight":b-=j;break;case"take":b=ve(b,f+j);break;case"takeRight":f=ue(f,b-j)}}b={start:f,end:b},e=b.start,f=b.end,b=f-e,e=d?f:e-1,f=ve(b,this.__takeCount__),h=(g=this.__iteratees__)?g.length:0,i=0,j=[];a:for(;b--&&f>i;){for(var e=e+c,k=-1,l=a[e];++k<h;){var m=g[k],n=m.iteratee,o=m.type;if(o==J){if(m.done&&(d?e>m.index:e<m.index)&&(m.count=0,m.done=!1),m.index=e,!(m.done||(o=m.limit,m.done=o>-1?m.count++>=o:!n(l))))continue a}else if(m=n(l),o==L)l=m;else if(!m){if(o==K)continue a;break a}}j[i++]=l}return j},Ka.prototype.chain=function(){return Wc(this)},Ka.prototype.commit=function(){return new Ma(this.value(),this.__chain__)},Ka.prototype.plant=function(a){for(var b,c=this;c instanceof La;){var d=Lc(c);b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},Ka.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof Na?(this.__actions__.length&&(a=new Na(this)),new Ma(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})},Ka.prototype.toString=function(){return this.value()+""},Ka.prototype.run=Ka.prototype.toJSON=Ka.prototype.valueOf=Ka.prototype.value=function(){return Jb(this.__wrapped__,this.__actions__)},Ka.prototype.collect=Ka.prototype.map,Ka.prototype.head=Ka.prototype.first,Ka.prototype.select=Ka.prototype.filter,Ka.prototype.tail=Ka.prototype.rest,Ka}var u,v="3.8.0",w=1,x=2,y=4,z=8,A=16,B=32,C=64,D=128,E=256,F=30,G="...",H=150,I=16,J=0,K=1,L=2,M="Expected a function",N="__lodash_placeholder__",O="[object Arguments]",P="[object Array]",Q="[object Boolean]",R="[object Date]",S="[object Error]",T="[object Function]",U="[object Number]",V="[object Object]",W="[object RegExp]",X="[object String]",Y="[object ArrayBuffer]",Z="[object Float32Array]",$="[object Float64Array]",_="[object Int8Array]",aa="[object Int16Array]",ba="[object Int32Array]",ca="[object Uint8Array]",da="[object Uint8ClampedArray]",ea="[object Uint16Array]",fa="[object Uint32Array]",ga=/\b__p\+='';/g,ha=/\b(__p\+=)''\+/g,ia=/(__e\(.*?\)|\b__t\))\+'';/g,ja=/&(?:amp|lt|gt|quot|#39|#96);/g,ka=/[&<>"'`]/g,la=RegExp(ja.source),ma=RegExp(ka.source),na=/<%-([\s\S]+?)%>/g,oa=/<%([\s\S]+?)%>/g,pa=/<%=([\s\S]+?)%>/g,qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ra=/^\w*$/,sa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ta=/[.*+?^${}()|[\]\/\\]/g,ua=RegExp(ta.source),va=/[\u0300-\u036f\ufe20-\ufe23]/g,wa=/\\(\\)?/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ya=/\w*$/,za=/^0[xX]/,Aa=/^\[object .+?Constructor\]$/,Ba=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ca=/($^)/,Da=/['\n\r\u2028\u2029\\]/g,Ea=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Fa=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Ga="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Ha={};Ha[Z]=Ha[$]=Ha[_]=Ha[aa]=Ha[ba]=Ha[ca]=Ha[da]=Ha[ea]=Ha[fa]=!0,Ha[O]=Ha[P]=Ha[Y]=Ha[Q]=Ha[R]=Ha[S]=Ha[T]=Ha["[object Map]"]=Ha[U]=Ha[V]=Ha[W]=Ha["[object Set]"]=Ha[X]=Ha["[object WeakMap]"]=!1;var Ia={};Ia[O]=Ia[P]=Ia[Y]=Ia[Q]=Ia[R]=Ia[Z]=Ia[$]=Ia[_]=Ia[aa]=Ia[ba]=Ia[U]=Ia[V]=Ia[W]=Ia[X]=Ia[ca]=Ia[da]=Ia[ea]=Ia[fa]=!0,Ia[S]=Ia[T]=Ia["[object Map]"]=Ia["[object Set]"]=Ia["[object WeakMap]"]=!1;var Ja={leading:!1,maxWait:0,trailing:!1},Ka={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},La={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ma={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Na={"function":!0,object:!0},Oa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pa=Na[typeof exports]&&exports&&!exports.nodeType&&exports,Qa=Na[typeof module]&&module&&!module.nodeType&&module,Ra=Na[typeof self]&&self&&self.Object&&self,Sa=Na[typeof window]&&window&&window.Object&&window,Ta=Qa&&Qa.exports===Pa&&Pa,Ua=Pa&&Qa&&"object"==typeof global&&global&&global.Object&&global||Sa!==(this&&this.window)&&Sa||Ra||this,Va=t();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ua._=Va,define(function(){return Va})):Pa&&Qa?Ta?(Qa.exports=Va)._=Va:Pa._=Va:Ua._=Va}).call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=function(a,b){return function(){return a.apply(b,arguments)}};c=null!=(e="undefined"!=typeof module&&null!==module?module.exports:void 0)?e:this,c.Appointment=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.begin=c._getset("_begin"),this.end=c._getset("_end"),this.beginBySchoolHour=c._getset("_beginBySchoolHour"),this.endBySchoolHour=c._getset("_endBySchoolHour"),this.fullDay=c._getset("_fullDay"),this.description=c._getset("_description"),this.location=c._getset("_location"),this.status=c._getset("_status"),this.type=c._getset("_type"),this.displayType=c._getset("_displayType"),this.content=c._getset("_content",null,function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,"").replace(/\n{2,}/g,"\n").replace(/&amp;/gi,"&").trim():""}),this.infoType=c._getset("_infoType"),this.infoTypeString=c._getset("_infoType",null,function(a){switch(a){case 0:return"none";case 1:return"homework";case 2:return"test";case 3:return"exam";case 4:return"quiz";case 5:return"oral test";case 6:return"information";default:return"unknown"}}),this.notes=c._getset("_notes"),this.isDone=c._getset("_isDone",function(a){return function(b){return a._isDone!==b?(a._isDone=b,a._magisterObj.http.put(a.url(),a._toMagisterStyle(),{},function(){})):void 0}}(this)),this.classes=c._getset("_classes"),this.teachers=c._getset("_teachers"),this.classRooms=c._getset("_classRooms"),this.groups=c._getset("_groups"),this.appointmentId=c._getset("_appointmentId"),this.attachments=c._getset("_attachments"),this.url=c._getset("_url"),this.scrapped=c._getset("_scrapped"),this.absenceInfo=c._getset("_absenceInfo")}return a.prototype._toMagisterStyle=function(){var a,b,d,e;return b={},b.Id=this._id,b.Start=c._helpers.toUtcString(this._begin),b.Einde=c._helpers.toUtcString(this._end),b.LesuurVan=this._beginBySchoolHour,b.LesuurTotMet=this._endBySchoolHour,b.DuurtHeleDag=this._fullDay,b.Omschrijving=this._description,b.Lokatie=this._location,b.Status=this._status,b.Type=this._type,b.WeergaveType=this._displayType,b.Inhoud=this._content,b.InfoType=this._infoType,b.Aantekening=this._notes,b.Afgerond=this._isDone,b.Lokalen=function(){var b,c,d,e;for(d=this._classRooms,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push({Naam:a});return e}.call(this),b.Docenten=function(){var a,b,c,e;for(c=this._teachers,e=[],a=0,b=c.length;b>a;a++)d=c[a],e.push(d._toMagisterStyle());return e}.call(this),b.Vakken=function(){var b,c,d,e;for(d=this._classes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push({Naam:a});return e}.call(this),b.Groepen=this._groups,b.OpdrachtId=this._appointmentId,b.Bijlagen=null!=(e=this._attachments)?e:[],b},a.prototype._makeStorable=function(){return d.omit(this,"_magisterObj")},a._convertRaw=function(a,b){var d,e,f,g,h;return e=new c.Appointment(a),e._id=b.Id,e._begin=new Date(Date.parse(b.Start)),e._end=new Date(Date.parse(b.Einde)),e._beginBySchoolHour=b.LesuurVan,e._endBySchoolHour=b.LesuurTotMet,e._fullDay=b.DuurtHeleDag,e._description=null!=(g=b.Omschrijving)?g:"",e._location=null!=(h=b.Lokatie)?h:"",e._status=b.Status,e._type=b.Type,e._displayType=b.WeergaveType,e._content=b.Inhoud,e._infoType=b.InfoType,e._notes=b.Aantekening,e._isDone=b.Afgerond,e._classes=null!=b.Vakken?function(){var a,c,e,f;for(e=b.Vakken,f=[],a=0,c=e.length;c>a;a++)d=e[a],f.push(d.Naam);return f}():[],e._teachers=null!=b.Docenten?function(){var d,e,g,h;for(g=b.Docenten,h=[],d=0,e=g.length;e>d;d++)f=g[d],h.push(c.Person._convertRaw(a,f));return h}():[],e._classRooms=null!=b.Lokalen?function(){var a,c,e,f;for(e=b.Lokalen,f=[],a=0,c=e.length;c>a;a++)d=e[a],f.push(d.Naam);return f}():[],e._groups=b.Groepen,e._appointmentId=b.OpdrachtId,e._attachments=b.Bijlagen,e._url=""+a._personUrl+"/afspraken/"+e._id,e._scrapped=0===b.Status,e},a._convertStored=function(a,b){var e;return e=d.extend(b,new c.Appointment(a)),e._magisterObj=a,e._begin=new Date(Date.parse(b._begin)),e._end=new Date(Date.parse(b._end)),e},a}(),c=null!=(f="undefined"!=typeof module&&null!==module?module.exports:void 0)?f:this,c.Assignment=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.name=c._getset("_name"),this.description=c._getset("_description"),this["class"]=c._getset("_class"),this.deadline=c._getset("_deadline"),this.handedInOn=c._getset("_handedInOn"),this.files=c._getset("_files"),this.teachers=c._getset("_teachers"),this.grade=c._getset("_grade"),this.markedOn=c._getset("_markedOn"),this.handInAgain=c._getset("_handInAgain"),this.finished=c._getset("_finished"),this.canHandIn=c._getset("_canHandIn")}return a.prototype.versions=function(a){var b,d,e,f,g,h;for(d=c._helpers.asyncResultWaiter(this._versionIds.length,function(b){return a(null,b)}),g=this._versionIds,h=[],e=0,f=g.length;f>e;e++)b=g[e],h.push(this._magisterObj.http.get(""+this._magisterObj._personUrl+"/opdrachten/versie/"+b,{},function(b){return function(e,f){return null!=e?a(e,null):d(c.AssignmentVersion._convertRaw(b._magisterObj,b,JSON.parse(f.content)))}}(this)));return h},a._convertRaw=function(a,b){var d,e,f,g;return e=new c.Assignment(a),e._id=b.Id,e._name=b.Titel,e._description=b.Omschrijving,e._class=b.Vak,e._deadline=new Date(Date.parse(b.InleverenVoor)),e._handedInOn=new Date(Date.parse(b.IngeleverdOp)),e._files=function(){var e,f,g,h;for(g=b.Bijlagen,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(c.File._convertRaw(a,void 0,d));return h}(),e._teachers=null!=b.Docenten?function(){var d,e,g,h;for(g=b.Docenten,h=[],d=0,e=g.length;e>d;d++)f=g[d],h.push(c.Person._convertRaw(a,f));return h}():void 0,e._versionIds=function(){var a,c,d,e;for(d=b.VersieNavigatieItems,e=[],a=0,c=d.length;c>a;a++)g=d[a],e.push(g.Id);return e}(),e._grade=b.Beoordeling,e._markedOn=new Date(Date.parse(b.BeoordeeldOp)),e._handInAgain=b.OpnieuwInleveren,e._finished=b.Afgesloten,e._canHandIn=b.MagInleveren,e},a}(),c.AssignmentVersion=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this["class"]=c._getset("_class"),this.state=c._getset("_state"),this.pupilMessage=c._getset("_pupilMessage"),this.teacherNotice=c._getset("_teacherNotice"),this.handedInFiles=c._getset("_handedInFiles"),this.feedbackFiles=c._getset("_feedbackFiles"),this.deadline=c._getset("_deadline"),this.handedInOn=c._getset("_handedInOn"),this.grade=c._getset("_grade"),this.markedOn=c._getset("_markedOn"),this.version=c._getset("_version"),this.tooLate=c._getset("_tooLate")}return a._convertRaw=function(a,b,d){var e,f;return f=new c.AssignmentVersion(a),f._id=d.Id,f._class=b._class,f._state=d.Status,f._pupilMessage=d.LeerlingOpmerking,f._teacherNotice=d.DocentOpmerking,f._handedInFiles=function(){var b,f,g,h;for(g=d.LeerlingBijlagen,h=[],b=0,f=g.length;f>b;b++)e=g[b],h.push(c.File._convertRaw(a,void 0,e));return h}(),f._feedbackFiles=function(){var b,f,g,h;for(g=d.FeedbackBijlagen,h=[],b=0,f=g.length;f>b;b++)e=g[b],h.push(c.File._convertRaw(a,void 0,e));return h}(),f._deadline=new Date(Date.parse(d.InleverenVoor)),f._handedInOn=new Date(Date.parse(d.IngeleverdOp)),f._grade=d.Beoordeling,f._markedOn=new Date(Date.parse(d.BeoordeeldOp)),f._version=d.VersieNummer,f._tooLate=d.IsTeLaat,f},a}(),c=null!=(k="undefined"!=typeof module&&null!==module?module.exports:void 0)?k:this,c.Class=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.beginDate=c._getset("_beginDate"),this.endDate=c._getset("_endDate"),this.abbreviation=c._getset("_abbreviation"),this.description=c._getset("_description"),this.number=c._getset("_number"),this.teacher=c._getset("_teacher"),this.classExemption=c._getset("_classExemption")}return a._convertRaw=function(a,b){var d,e,f,g,h;return d=new c.Class(a),d._id=null!=(e=b.id)?e:b.Id,d._beginDate=new Date(Date.parse(b.begindatum)),d._endDate=new Date(Date.parse(b.einddatum)),d._abbreviation=null!=(f=b.afkorting)?f:b.Afkorting,d._description=null!=(g=b.omschrijving)?g:b.Omschrijving,d._number=null!=(h=b.volgnr)?h:b.Volgnr,d._teacher=c.Person._convertRaw(a,{Docentcode:b.docent}),d._classExemption=b.VakDispensatie||b.VakVrijstelling,d},a}(),c.Course=function(){function a(a){this._magisterObj=a,this.getOtherTutors=s(this.getOtherTutors,this),this.id=c._getset("_id"),this.begin=c._getset("_begin"),this.end=c._getset("_end"),this.schoolPeriod=c._getset("_schoolPeriod"),this.type=c._getset("_type"),this.group=c._getset("_group"),this.profile=c._getset("_profile"),this.alternativeProfile=c._getset("_alternativeProfile")}return a.prototype.classes=function(a){return this._magisterObj.http.get(this._classesUrl,{},function(b){return function(d,e){var f;return null!=d?a(d,null):a(null,function(){var a,b,d,g;for(d=JSON.parse(e.content),g=[],a=0,b=d.length;b>a;a++)f=d[a],g.push(c.Class._convertRaw(this._magisterObj,f));return g}.call(b))}}(this))},a.prototype.grades=function(){var a,b,e,f,g;if(g=d.filter(arguments,function(a){return d.isBoolean(a)}),e=g[0],b=g[1],f=g[2],a=d.find(arguments,function(a){return d.isFunction(a)}),null==a)throw new Error("Callback can't be null");return null==e&&(e=!0),null==b&&(b=!0),null==f&&(f=!1),this._magisterObj.http.get(f?this._gradesUrlPrefix:this._gradesUrl,{},function(g){return function(h,i){var j,k,l,m,n;if(null!=h)return a(h,null);for(i=JSON.parse(i.content).Items,j=c._helpers.asyncResultWaiter(i.length,function(b){var c,e,f,g,h,i,j,k;for(j=d.uniq(b,function(a){return a["class"]().id()}).map(function(a){return a["class"]()}),f=0,h=j.length;h>f;f++)for(c=j[f],k=d.filter(b,function(a){return a["class"]().id()===c.id()}),g=0,i=k.length;i>g;g++)e=k[g],e._class=c;return a(null,d.sortBy(b,function(a){return a.dateFilledIn()}))}),n=[],l=0,m=i.length;m>l;l++)k=i[l],n.push(function(d){var h,i,k;return h=c.Grade._convertRaw(g._magisterObj,d),h._columnUrl=g._columnUrlPrefix+(null!=(k=d.CijferKolom)?k.Id:void 0),i=c._helpers.asyncResultWaiter(2,function(){return j(h)}),e&&!f?g._magisterObj.getPersons(h.Docent,3,function(a,b){return null==a&&null!=b[0]&&(h._teacher=b[0]),i()}):i(),b&&!f?h.fillGrade(function(b,c){return null!=b?a(b,null):i()}):i()}(k));return n}}(this))},a.prototype.getPersonalTutor=function(a){if(null==a)throw new Error("Callback can't be null");return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/aanmeldingen/"+this._id+"/mentor",{},function(b){return function(d,e){return null!=d?a(d,null):a(null,c.Person._convertRaw(b._magisterObj,JSON.parse(e.content)))}}(this))},a.prototype.getOtherTutors=function(a){if(null==a)throw new Error("Callback can't be null");return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/aanmeldingen/"+this._id+"/mentor",{},function(b){return function(d,e){var f,g;return null!=d?a(d,null):(f=JSON.parse(e.content).items,a(null,function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)g=f[a],d.push(c.Person._convertRaw(this._magisterObj,g));return d}.call(b)))}}(this))},a._convertRaw=function(a,b){var d;return d=new c.Course(a),d._classesUrl=a._personUrl+("/aanmeldingen/"+b.Id+"/vakken"),d._gradesUrlPrefix=a._personUrl+("/aanmeldingen/"+b.Id+"/cijfers"),d._gradesUrl=d._gradesUrlPrefix+"/cijferoverzichtvooraanmelding?actievePerioden=false&alleenBerekendeKolommen=false&alleenPTAKolommen=false",d._columnUrlPrefix=d._gradesUrlPrefix+"/extracijferkolominfo/",d._id=b.Id,d._begin=new Date(Date.parse(b.Start)),d._end=new Date(Date.parse(b.Einde)),d._schoolPeriod=b.Lesperiode,d._type={id:b.Studie.Id,description:b.Studie.Omschrijving},d._group={id:b.Groep.Id,description:b.Groep.Omschrijving,locationId:b.Groep.LocatieId},d._profile=b.Profiel,d._alternativeProfile=b.Profiel2,d},a}(),c=null!=(l="undefined"!=typeof module&&null!==module?module.exports:void 0)?l:this,c.DigitalSchoolUtility=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.type=c._getset("_type"),this.name=c._getset("_name"),this.publisher=c._getset("_publisher"),this.state=c._getset("_state"),this.begin=c._getset("_begin"),this.end=c._getset("_end"),this.EAN=c._getset("_EAN"),this.url=c._getset("_url"),this["class"]=c._getset("_class")}return a._convertRaw=function(a,b){var d;return d=new c.DigitalSchoolUtility(a),d._id=b.Id,d._type=b.MateriaalType,d._name=b.Titel,d._publisher=b.Uitgeverij,d._state=b.Status,d._begin=new Date(Date.parse(b.Start)),d._end=new Date(Date.parse(b.Eind)),d._EAN=Number(b.EAN),d._url=b.Url,d._class=b.Vak,d},a}(),c=null!=(m="undefined"!=typeof module&&null!==module?module.exports:void 0)?m:this,c.FileFolder=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.name=c._getset("_name"),this.rights=c._getset("_rights"),this.parentId=c._getset("_parentId")}return a.prototype.files=function(a){return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/bronnen?parentId="+this.id(),{},function(b){return function(d,e){var f,g,h,i,j,k;if(null!=d)return a(d,null);for(g=function(){var a,b,d,g;for(d=JSON.parse(e.content).Items,g=[],a=0,b=d.length;b>a;a++)f=d[a],g.push(c.File._convertRaw(this._magisterObj,this,f));return g}.call(b),h=c._helpers.asyncResultWaiter(g.length,function(b){return a(null,g)}),k=[],i=0,j=g.length;j>i;i++)f=g[i],k.push(function(a){return b._magisterObj.getPersons(a.GeplaatstDoor,function(b,c){return null==b&&0!==c.length&&(a._addedBy=c[0]),h()})}(f));return k}}(this))},a._convertRaw=function(a,b){var d;return d=new c.FileFolder(a),d._id=b.Id,d._name=b.Naam,d._rights=b.Privilege,d._parentId=b.ParentId,d},a}(),c.File=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.type=c._getset("_type"),this.name=c._getset("_name",function(a){return function(b){return a._name=b,a._update()}}(this)),this.uri=c._getset("_uri"),this.size=c._getset("_size"),this.rights=c._getset("_rights"),this.mime=c._getset("_mime"),this.changedDate=c._getset("_changedDate"),this.creationDate=c._getset("_creationDate"),
this.addedBy=c._getset("_addedBy"),this.fileBlobId=c._getset("_fileBlobId"),this.fileFolder=c._getset("_fileFolder",this.move),this.uniqueId=c._getset("_uniqueId")}return a.prototype.download=function(){var a,b,c,e,f;if(a=d.find(arguments,function(a){return d.isFunction(a)}),b=null!=(f=d.find(arguments,function(a){return d.isBoolean(a)}))?f:!0,e=null,"undefined"!=typeof Meteor&&null!==Meteor?Meteor.isServer:void 0)e=Npm.require("request");else{if(null==("undefined"!=typeof module&&null!==module?module.exports:void 0))return void("function"==typeof a&&a(new Error("`File.download` is only accessible from the server at the moment.\nYou can set a proxy yourself with something like iron:router serverside routes."),null));e=require("request")}return c=null!=b?d.isString(b)?b:this.name():void 0,e({url:this._downloadUrl,method:"GET",headers:this._magisterObj.http._cookieInserter(),encoding:null}).on("error",function(b){return"function"==typeof a?a(b,null):void 0}).on("response",function(b){return"function"==typeof a?a(null,""):void 0}).pipe(require("fs").createWriteStream(c))},a.prototype.move=function(a){return this._magisterObj.fileFolders(function(b){return function(e,f){if(null!=e)throw e;return d.isObject(a)||(a=d.find(f,function(b){return c._helpers.contains(b.name(),a,!0)||b.id()===a})),b._fileFolder=a,b._update()}}(this))},a.prototype.remove=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/bronnen/"+this.id(),{},function(a,b){if(null!=a)throw a})},a.prototype._update=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/bronnen/"+this.id(),this._toMagisterStyle(),{},function(){})},a.prototype._toMagisterStyle=function(){var a;return a={},a.Id=this._id,a.BronSoort=this._type,a.Naam=this._name,a.Uri=this._uri,a.Grootte=this._size,a.Privilege=this._rights,a.ContentType=this._mime,a.FileBlobId=this._fileBlobId,a.ParentId=this._fileFolder.id(),a.UniqueId=this._uniqueId,a},a._convertRaw=function(a,b,e){var f,g,h,i;return null!=e._addedBy?f=e._addedBy:(f=new c.Person(a,null,"",""),f._fullName=e.GeplaatstDoor),h=new c.File(a),h._id=e.Id,h._type=e.BronSoort,h._name=e.Naam,h._uri=e.Uri,h._size=e.Grootte,h._rights=e.Privilege,h._mime=e.ContentType,h._changedDate=new Date(Date.parse(e.GewijzigdOp)),h._creationDate=new Date(Date.parse(null!=(i=e.GemaaktOp)?i:e.Datum)),h._addedBy=f,h._fileBlobId=e.FileBlobId,h._fileFolder=b,h._uniqueId=e.UniqueId,g=d.find(e.Links,{Rel:"Contents"}),null==g&&(g=d.find(e.Links,{Rel:"Self"})),h._downloadUrl=a.magisterSchool.url+g.Href,h},a}(),c=null!=(n="undefined"!=typeof module&&null!==module?module.exports:void 0)?n:this,c.Grade=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.grade=c._getset("_grade"),this.passed=c._getset("_passed"),this.dateFilledIn=c._getset("_dateFilledIn"),this.gradePeriod=c._getset("_gradePeriod"),this["class"]=c._getset("_class"),this.atLaterDate=c._getset("_atLaterDate"),this.exemption=c._getset("_exemption"),this.counts=c._getset("_counts"),this.type=c._getset("_type"),this.teacher=c._getset("_teacher"),this.classExemption=c._getset("_classExemption"),this.description=c._getset("_description"),this.weight=c._getset("_weight")}return a.prototype.fillGrade=function(a){return this._filled?"function"==typeof a?a(null,this):void 0:this._magisterObj.http.get(this._columnUrl,{},function(b){return function(c,d){return null!=c?"function"==typeof a?a(c,null):void 0:(d=JSON.parse(d.content),b._description=d.WerkInformatieOmschrijving,b._weight=d.Weging,b._type._level=d.KolomNiveau,b._type._description=d.KolomOmschrijving,b._filled=!0,"function"==typeof a?a(null,b):void 0)}}(this))},a._convertRaw=function(a,b){var d;return d=new c.Grade(a),d._id=b.CijferId,d._grade=b.CijferStr,d._passed=b.IsVoldoende,d._dateFilledIn=new Date(Date.parse(b.DatumIngevoerd)),d._gradePeriod={id:function(){return b.CijferPeriode.Id},name:function(){return b.CijferPeriode.Naam}},d._class={id:function(){return b.Vak.Id},abbreviation:function(){return b.Vak.Afkorting},description:function(){return b.Vak.Omschrijving}},d._atLaterDate=b.Inhalen,d._exemption=b.Vrijstelling,d._counts=b.TeltMee,null!=b.CijferKolom&&(d._type=c.GradeType._convertRaw(a,b.CijferKolom)),d._assignmentId=b.CijferKolomIdEloOpdracht,d._teacher=c.Person._convertRaw(a,{Docentcode:b.Docent}),d._teacher._type=3,d._classExemption=b.VakDispensatie||b.VakVrijstelling,d._description="",d._weight=0,d},a}(),c.GradeType=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.name=c._getset("_name"),this.number=c._getset("_number"),this.header=c._getset("_header"),this.description=c._getset("_description"),this.type=c._getset("_type"),this.isAtLaterDate=c._getset("_isAtLaterDate"),this.isTeacher=c._getset("_isTeacher"),this.hasNestedTypes=c._getset("_hasNestedTypes"),this.isPTA=c._getset("_isPTA"),this.level=c._getset("_level")}return a._convertRaw=function(a,b){var d;return d=new c.GradeType(a),d._id=b.Id,d._name=b.KolomNaam,d._number=b.KolomNummer,d._header=b.KolomKop,d._type=b.KolomSoort,d._isAtLaterDate=b.IsHerkansingKolom,d._isTeacher=b.IsDocentKolom,d._hasNestedTypes=b.HeeftOndeliggendeKolommen,d._isPTA=b.IsPTAKolom,d._level=null,d._description="",d},a}(),c=null!=(o="undefined"!=typeof module&&null!==module?module.exports:void 0)?o:this,"undefined"!=typeof Meteor&&null!==Meteor?this._=d=lodash:null==d&&(this._=d=require("lodash")),c.Magister=function(){function a(a,b,e,f){if(this.magisterSchool=a,this.username=b,this.password=e,this._keepLoggedIn=null!=f?f:!0,3!==arguments.length&&4!==arguments.length)throw new Error("Expected 3 or 4 arguments, got "+arguments.length);this._readyCallbacks=[],this.http=new c.MagisterHttp,d.isString(this.magisterSchool)?MagisterSchool.getSchools(this.magisterSchool,function(a){return function(b,c){if(null!=b)throw b;if(0===c.length)throw new Error("No school with the query "+a.magisterSchool+" found.");return a.magisterSchool=c[0],a.reLogin()}}(this)):this.reLogin()}return a.prototype.appointments=function(){var a,b,e,f,g,h,i,j;return a=d.find(arguments,function(a){return d.isFunction(a)}),e=null!=(i=d.find(arguments,function(a){return d.isBoolean(a)}))?i:!0,j=d.where(arguments,function(a){return d.isDate(a)}),f=j[0],g=j[1],d.isDate(g)||(g=f),f=c._helpers.date(f),g=c._helpers.date(g),this._forceReady(),b=c._helpers.urlDateConvert,h=""+this._personUrl+"/afspraken?tot="+b(g)+"&van="+b(f),this.http.get(h,{},function(h){return function(i,j){var k,l,m,n,o,p,q,r,s;if(null!=i)return a(i,null);if(j=JSON.parse(j.content),m=function(){var a,b,d,e;for(d=j.Items,e=[],a=0,b=d.length;b>a;a++)k=d[a],e.push(c.Appointment._convertRaw(this,k));return e}.call(h),l=[],n=[],o=c._helpers.asyncResultWaiter(3,function(b){return d.each(m,function(a){return a._absenceInfo=d.find(l,function(b){return b.appointmentId===a.id()})}),m=d(m).reject(function(a){return d.contains(n,function(b){return b.id()===a.id()})}).concat(n).filter(function(a){return c._helpers.date(a.begin())>=f&&(c._helpers.date(a.end())<=g||a.fullDay())}).sortBy("_begin").value(),a(null,m)}),h.http.get(""+h._personUrl+"/roosterwijzigingen?tot="+b(g)+"&van="+b(f),{},function(a,b){return b=JSON.parse(b.content),n.concat(function(){var a,d,e,f;for(e=b.Items,f=[],a=0,d=e.length;d>a;a++)k=e[a],f.push(c.Appointment._convertRaw(this,k));return f}.call(h)),o()}),h.http.get(""+h._personUrl+"/absenties?tot="+b(g)+"&van="+b(f),{},function(a,b){var d,e;for(b=JSON.parse(b.content).Items,d=0,e=b.length;e>d;d++)k=b[d],l.push({id:k.Id,begin:new Date(Date.parse(k.Start)),end:new Date(Date.parse(k.Eind)),schoolHour:k.Lesuur,permitted:k.Geoorloofd,appointmentId:k.AfspraakId,description:c._helpers.trim(k.Omschrijving),type:k.VerantwoordingType,code:k.Code});return o()}),e){for(p=c._helpers.asyncResultWaiter(m.length,o),s=[],q=0,r=m.length;r>q;q++)k=m[q],s.push(function(a){var b,c;return b=null!=(c=a.teachers())?c:[],h.fillPersons(b,function(b,c){return a._teachers=c,p()},3)}(k));return s}return o()}}(this))},a.prototype.messageFolders=function(a,b){var e;return null==b&&(b=function(){}),this._forceReady(),e=d.isString(a)&&""!==a?d.where(this._messageFolders,function(b){return c._helpers.contains(b.name(),a,!0)}):this._messageFolders,b(null,e),e},a.prototype.inbox=function(a){return null==a&&(a=function(){}),this.messageFolders("postvak in",function(b,c){return a(null,c[0])})[0]},a.prototype.sentItems=function(a){return null==a&&(a=function(){}),this.messageFolders("verzonden items",function(b,c){return a(null,c[0])})[0]},a.prototype.bin=function(a){return null==a&&(a=function(){}),this.messageFolders("verwijderde items",function(b,c){return a(null,c[0])})[0]},a.prototype.alerts=function(a){return null==a&&(a=function(){}),this.messageFolders("mededelingen",function(b,c){return a(null,c[0])})[0]},a.prototype.courses=function(a){var b;return this._forceReady(),b=""+this._personUrl+"/aanmeldingen",this.http.get(b,{},function(b){return function(e,f){var g;return null!=e?a(e,null):(f=JSON.parse(f.content),a(null,d.sortBy(function(){var a,b,d,e;for(d=f.Items,e=[],a=0,b=d.length;b>a;a++)g=d[a],e.push(c.Course._convertRaw(this,g));return e}.call(b),function(a){return a.begin()}).reverse()))}}(this))},a.prototype.getLimitedCurrentCourseInfo=function(a){var b;return this._forceReady(),b=""+this._personUrl+"/opleidinggegevensprofiel",this.http.get(b,{},function(b,c){var d;return null!=b?a(b,null):(d=JSON.parse(c.content),a(null,{group:d.Klas,profile:pared.Profielen,pupilId:pared.StamNr,type:{year:+/\d+/.exec(Parsed.Studie)[0],schoolVariant:/[^\d\s]+/.exec(Parsed.Studie)[0]}}))})},a._cachedPersons={},a.prototype.getPersons=function(){var b,d,e,f,g;return this._forceReady(),d=c._helpers.trim(arguments[0]),b=2===arguments.length?arguments[1]:arguments[2],3===arguments.length&&(e=arguments[1]),null!=d&&null!=b&&d.length>=3?null==e?void this.getPersons(d,3,function(a){return function(e,f){var g;return null!=e?b(e,null):(g=f,a.getPersons(d,4,function(a,d){return null!=a?b(a,null):b(null,c._helpers.pushMore(d,g))}))}}(this)):(e=function(){switch(c.Person._convertType(e)){case 3:return"Personeel";case 4:return"Leerling";case 8:return"Project";default:return"Overig"}}(),f=""+this._personUrl+"/contactpersonen?contactPersoonType="+e+"&q="+d.replace(/\ +/g,"+"),null!=(g=a._cachedPersons[""+this._id+e+d])?b(null,g):this.http.get(f,{},function(f){return function(g,h){var i;return null!=g?b(g,null):(h=function(){var a,b,d,e;for(d=JSON.parse(h.content).Items,e=[],a=0,b=d.length;b>a;a++)i=d[a],e.push(c.Person._convertRaw(this,i));return e}.call(f),a._cachedPersons[""+f._id+e+d]=h,b(null,h))}}(this))):void b(null,[])},a.prototype.fillPersons=function(a,b,e){var f,g,h,i,j,k;if(this._forceReady(),d.isArray(a)){if(0===a.length)return void b(null,[]);for(g=c._helpers.asyncResultWaiter(a.length,function(a){return b(null,a)}),h=0,i=a.length;i>h;h++){f=a[h];try{this.getPersons(d.last(f.fullName().split(" ")),null!=(j=f._type)?j:e,function(a,b){var c;if(null!=a||null==b)throw a;return g(null!=(c=b[0])?c:f)})}catch(l){g(f)}}}else{if(!d.isObject(a))throw new Error("Expected persons to be an Array or an Object, got a(n) "+typeof a);try{this.getPersons(d.last(a.fullName().split(" ")),null!=(k=a._type)?k:e,function(c,d){var e;if(null!=c||null==d)throw c;return b(null,null!=(e=d[0])?e:a)})}catch(l){b(a)}}return void 0},a.prototype.composeAndSendMessage=function(){var a,b,e,f,g;return this._forceReady(),g=d.filter(arguments,function(a){return d.isString(a)}),f=g[0],a=g[1],e=d.last(arguments),2===arguments.length&&(a=""),b=new c.Message(this),b.subject(f),b.body(null!=a?a:""),b.addRecipient(e),b.send()},a.prototype.fileFolders=function(a){return this._forceReady(),this.http.get(""+this._personUrl+"/bronnen?soort=0",{},function(b){return function(d,e){var f;return null!=d?a(d,null):a(null,function(){var a,b,d,g;for(d=JSON.parse(e.content).Items,g=[],a=0,b=d.length;b>a;a++)f=d[a],g.push(c.FileFolder._convertRaw(this,f));return g}.call(b))}}(this))},a.prototype.studyGuides=function(a){var b,e,f;return this._forceReady(),e=null!=(f=d.find(arguments,function(a){return d.isBoolean(a)}))?f:!0,a=d.find(arguments,function(a){return d.isFunction(a)}),b=function(b){return function(e){return b.http.get(""+b._pupilUrl+"/studiewijzers?peildatum="+c._helpers.urlDateConvert(new Date),{},function(f,g){var h,i,j,k,l;if(null!=f)return a(f,null);for(g=function(){var a,b,d,e;for(d=JSON.parse(g.content).Items,e=[],a=0,b=d.length;b>a;a++)h=d[a],e.push(c.StudyGuide._convertRaw(this,h));return e}.call(b),j=function(a){return null!=e?a._class=d.find(e,function(b){return b.abbreviation()===a._class}):a._class=null},k=0,l=g.length;l>k;k++)i=g[k],j(i);return a(null,g)})}}(this),e?this.courses(function(a,c){return null!=c&&0!==c.length?c[0].classes(function(a,c){return null!=c&&0!==c.length?b(c):b()}):b()}):b()},a.prototype.assignments=function(){var a,b,e,f,g,h,i,j;return this._forceReady(),i=d.filter(arguments,function(a){return d.isNumber(a)}),a=i[0],h=i[1],j=d.filter(arguments,function(a){return d.isBoolean(a)}),g=j[0],f=j[1],b=d.find(arguments,function(a){return d.isFunction(a)}),null!=b?(null==g&&(g=!0),null==f&&(f=!0),null==a&&(a=50),null==h&&(h=0),e=function(e){return function(f){return e.http.get(""+e._personUrl+"/opdrachten?skip="+h+"&top="+a+"&status=alle",{},function(a,h){var i,j,k,l,m,n;if(null!=a)return b(a,null);for(h=function(){var a,b,c,d;for(c=JSON.parse(h.content).Items,d=[],a=0,b=c.length;b>a;a++)i=c[a],d.push(i.Id);return d}(),k=c._helpers.asyncResultWaiter(h.length,function(a){return b(null,a)}),n=[],l=0,m=h.length;m>l;l++)j=h[l],n.push(e.http.get(""+e._personUrl+"/opdrachten/"+j,{},function(a,b){var h,i,j;return h=c.Assignment._convertRaw(e,JSON.parse(b.content)),null!=f?h._class=d.find(f,function(a){return a.abbreviation()===h._class}):h._class=null,g?(i=null!=(j=h.teachers())?j:[],e.fillPersons(i,function(a,b){return h._teachers=b,k(h)},3)):k(h)}));return n})}}(this),f?this.courses(function(a,b){return null!=b&&0!==b.length?b[0].classes(function(a,b){return null!=b&&0!==b.length?e(b):e()}):e()}):e()):void 0},a.prototype.digitalSchoolUtilities=function(){var a,b,e,f,g,h;return this._forceReady(),e=null!=(h=d.find(arguments,function(a){return d.isBoolean(a)}))?h:!0,a=d.find(arguments,function(a){return d.isFunction(a)}),null!=a?(d.isObject(g)&&(g=g.id()),f=null!=g?""+this._personUrl+"/lesmateriaal?vakken="+g:""+this._personUrl+"/lesmateriaal",b=function(b){return function(e){return b.http.get(f,{},function(f,g){var h,i,j,k,l,m,n,o;if(null!=f)return a(f,null);if(i=function(){var a,b,d,e;for(d=JSON.parse(g.content).Items,e=[],a=0,b=d.length;b>a;a++)h=d[a],e.push(c.DigitalSchoolUtility._convertRaw(this,h));return e}.call(b),null!=e)for(j=function(a){return a._class=d.find(e,function(b){return b.abbreviation()===a._class.Afkorting&&b.description()===a._class.Omschrijving})},l=0,n=i.length;n>l;l++)h=i[l],j(h);else for(k=function(a){return a._class=c.Class._convertRaw(b,a._class)},m=0,o=i.length;o>m;m++)h=i[m],k(h);return a(null,i)})}}(this),e?this.courses(function(a,c){return null!=c&&0!==c.length?d.last(c).classes(function(a,c){return b(c)}):void 0}):b()):void 0},a.prototype.profileInfo=function(a){return this._forceReady(),"function"==typeof a&&a(null,this._profileInfo),this._profileInfo},a.prototype.children=function(a){return this.http.get(""+this._personUrl+"/kinderen",{},function(b){return function(e,f){var g,h,i,j,k,l,m;if(null!=e)return a(e,null);if(h=JSON.parse(f.content),null!=h.ExceptionId&&1===h.Reason)return void a(d.extend(h,{message:"User is not a parent."}),null);for(j=[],m=h.Items,k=0,l=m.length;l>k;k++)i=m[k],g=c.ProfileInfo._convertRaw(b,g),g._profilePicture=""+b.magisterSchool.url+"/api/personen/"+i.Id+"/foto",g.magister(function(a){var e;return e=d.clone(b),e._id=i.Id,e._personUrl=""+b.magisterSchool.url+"/api/personen/"+e._id,e._pupilUrl=""+b.magisterSchool.url+"/api/leerlingen/"+e._id,e._profileInfo=g,void b.http.get(""+e._personUrl+"/berichten/mappen",{},function(b,d){var f;return e._messageFolders=function(){var a,b,g,h;for(g=JSON.parse(d.content).Items,h=[],a=0,b=g.length;b>a;a++)f=g[a],h.push(c.MessageFolder._convertRaw(e,f));return h}(),a(e)})}),j.push(g);return a(null,j)}}(this))},a.prototype.ready=function(a){return d.isFunction(a)&&(this._ready||null!=this._magisterLoadError?d.bind(a,this)(this._magisterLoadError):this._readyCallbacks.push(d.bind(a,this))),this._ready===!0},a.prototype._forceReady=function(){if(!this._ready)throw new Error("Not done with logging in! (use Magister.ready(callback) to be sure that logging in is done)")},a.prototype._setReady=function(){var a,b,c,d;for(this._ready=!0,d=this._readyCallbacks,b=0,c=d.length;c>b;b++)(a=d[b])();return this._readyCallbacks=[]},a.prototype._setErrored=function(a){var b,c,d,e;for(this._magisterLoadError=a,e=this._readyCallbacks,c=0,d=e.length;d>c;c++)(b=e[c])(this._magisterLoadError);return this._readyCallbacks=[]},a.prototype._readyCallbacks=[],a.prototype._magisterLoadError=null,a.prototype.reLogin=function(){var a;return this._ready=!1,this._magisterLoadError=null,a=""+this.magisterSchool.url+"/api/sessie",this.http.post(a,{Gebruikersnaam:this.username,Wachtwoord:this.password,GebruikersnaamOnthouden:!0,IngelogdBlijven:this._keepLoggedIn},{headers:{"Content-Type":"application/json;charset=UTF-8"}},function(a){return function(b,d){return null!=b?a._setErrored(b):null!=d.content?a._setErrored(d.content):(a._sessionId=/[a-z\d-]+/.exec(d.headers["set-cookie"][0])[0],a.http._cookie="SESSION_ID="+a._sessionId+"; M6UserName="+a.username,a.http.get(""+a.magisterSchool.url+"/api/account",{},function(b,d){return null!=b?void a._setErrored(b):(d=JSON.parse(d.content),a._group=d.Groep[0],a._id=d.Persoon.Id,a._personUrl=""+a.magisterSchool.url+"/api/personen/"+a._id,a._pupilUrl=""+a.magisterSchool.url+"/api/leerlingen/"+a._id,a._profileInfo=c.ProfileInfo._convertRaw(a,d),a.http.get(""+a._personUrl+"/berichten/mappen",{},function(b,d){var e;return null!=b?void a._setErrored(b):(a._messageFolders=function(){var a,b,f,g;for(f=JSON.parse(d.content).Items,g=[],a=0,b=f.length;b>a;a++)e=f[a],g.push(c.MessageFolder._convertRaw(this,e));return g}.call(a),a._setReady())}))}))}}(this))},a}(),c=null!=(p="undefined"!=typeof module&&null!==module?module.exports:void 0)?p:this,b=function(a,b){switch(b){case 1:return a.inbox();case 2:return a.sentItems();case 3:return a.bin();case 4:return a.alerts();default:return c.MessageFolder._convertRaw({Id:b})}},c.Message=function(){function a(a){if(this._magisterObj=a,null==this._magisterObj)throw new Error("Magister instance is null!");this._magisterObj._forceReady(),this._canSend=!0,this._sender=this._magisterObj.profileInfo(),this._recipients=[],this._sendDate=new Date,this._isRead=!1,this._type=1,this._subject="",this._body="",this.id=c._getset("_id"),this.body=c._getset("_body",function(a){return function(b){return a._body=b.replace("\n","<br>")}}(this),function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,""):""}),this.attachments=c._getset("_attachments"),this.messageFolder=c._getset("_folderId",function(a){return function(b){return a.move(b)}}(this),function(a){return function(c){return b(a._magisterObj,c)}}(this)),this.subject=c._getset("_subject",function(a){return function(b){return a._subject=b}}(this)),this.sender=c._getset("_sender"),this.recipients=c._getset("_recipients"),this.sendDate=c._getset("_sendDate"),this.begin=c._getset("_begin"),this.end=c._getset("_end"),this.isRead=c._getset("_isRead",function(a){return function(b){return a._isRead===b||a._canSend?void 0:(a._isRead=b,a._update())}}(this)),this.state=c._getset("_state"),this.isFlagged=c._getset("_isFlagged"),this.type=c._getset("_type")}return a.prototype._tasks=0,a.prototype._sendAfterFinished=!1,a.prototype._working=function(){return 0!==this._tasks},a.prototype._tickDown=function(){return 0===--this._tasks&&this._sendAfterFinished?this.send():void 0},a.prototype._reset=function(){return this._tasks=0,this._sendAfterFinished=!1},a.prototype.addRecipient=function(a,b){var c,e,f;if(d.isString(a))this._tasks++,this._magisterObj.getPersons(a,b,function(c){return function(d,e){if(0!==e.length)return c.recipients().push(e[0]),c._tickDown();throw null!=b?(c._reset(),new Error("Couldn't find a person with the type: \""+b+'" and with the query: "'+a+'"')):(c._reset(),new Error("Couldn't find a person with the query: \""+a+'"'))}}(this));else if(d.isArray(a))for(e=0,f=a.length;f>e;e++)c=a[e],this.addRecipient(c,b);else{if(!d.isObject(a))throw this._reset(),new Error("Expected recipient to be a String or an Object, got a(n) "+typeof a);this.recipients().push(a)}return void 0},a.prototype.createReplyMessage=function(a){var b,d;return d=0!==this.subject().indexOf("RE: ")?"RE: "+this.subject():d(),b=new c.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=d,b._recipients=[this.sender()],b},a.prototype.createReplyToAllMessage=function(a){var b,e;return e=0!==this.subject().indexOf("RE: ")?"RE: "+this.subject():e(),b=new c.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=e,b._recipients=d.reject(this.recipients(),function(a){return a.id()===this._magisterObj.profileInfo().id()}).concat([this.sender()]),b},a.prototype.createForwardMessage=function(a){var b,d;return d=0!==this.subject().indexOf("FW: ")?"FW: "+this.subject():d(),b=new c.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=d,b},a.prototype.send=function(){if(this._working())return this._sendAfterFinished=!0,!1;if(!this._canSend)throw new Error("This message is marked as unsendable");if(null==this.recipients()||null==this.sender())throw new Error("Sender and/or recipients cannot be null");if(d.isEmpty(this.subject()))throw new Error("Subject cannot be null or empty");return null==this.body()&&this.body(""),this._magisterObj.http.post(""+this._magisterObj._personUrl+"/berichten",this._toMagisterStyle(),{},function(a,b){if(null!=a)throw a}),!0},a.prototype.move=function(a){if(d.isObject(a)&&(a=a.id()),!d.isNumber(a))throw new Error("Could not resolve MessageFolder form the given destination.");return this._folderId!==a?(this._folderId=a,this._update()):void 0},a.prototype.remove=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/berichten/"+this.id(),{},function(a,b){if(null!=a)throw a})},a.prototype._update=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/berichten/"+this.id()+"?berichtSoort="+this.type(),this._toMagisterStyle(),{},function(){})},a.prototype._toMagisterStyle=function(){var a,b;return a={},a.Id=this._id,a.Inhoud=this._body,a.MapId=this._folderId,a.Onderwerp=this._subject,a.Ontvangers=function(){var a,c,d,e;for(d=this._recipients,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b._toMagisterStyle());return e}.call(this),a.VerstuurdOp=this._sendDate,a.Begin=this._begin,a.Einde=this._end,a.IsGelezen=this._isRead,a.Status=this._state,a.HeeftPrioriteit=this._isFlagged,a.Soort=this._type,a},a._convertRaw=function(a,b){var d,e,f;return e=new c.Message(a),e._id=b.Id,e._body=null!=(f=b.Inhoud)?f:"",e._folderId=b.MapId,e._subject=b.Onderwerp,e._sender=c.Person._convertRaw(a,b.Afzender),e._recipients=function(){var e,f,g,h,i;for(g=null!=(h=b.Ontvangers)?h:[],i=[],e=0,f=g.length;f>e;e++)d=g[e],i.push(c.Person._convertRaw(a,d));return i}(),e._sendDate=new Date(Date.parse(b.VerstuurdOp)),e._begin=new Date(Date.parse(b.Begin)),e._end=new Date(Date.parse(b.Einde)),e._isRead=b.IsGelezen,e._state=b.Status,e._isFlagged=b.HeeftPrioriteit,e._type=b.Soort,e._canSend=!1,e},a}(),c=null!=(q="undefined"!=typeof module&&null!==module?module.exports:void 0)?q:this,a=function(a){var b,e,f;return b="",d.any(["unread","ongelezen"],function(b){return c._helpers.contains(a,b,!0)})?b+="&gelezen=false":d.any(["read","gelezen"],function(b){return c._helpers.contains(a,b,!0)})&&(b+="&gelezen=true"),null!=(f=/(skip \d+)|(sla \d+ over)/gi.exec(a))&&(e=/\d+/.exec(f[0])[0],b+="&skip="+e),b},c.MessageFolder=function(){function b(a){this._magisterObj=a,this.name=c._getset("_name"),this.unreadMessagesCount=c._getset("_unreadMessagesCount"),this.id=c._getset("_id"),this.parentId=c._getset("_parentId")}return b.prototype.messages=function(){var b,e,f,g,h,i,j,k;if(f=null!=(k=d.find(arguments,function(a){return d.isNumber(a)}))?k:10,g=null!=(i=d.find(arguments,function(a){return d.isString(a)}))?i:"",e=null!=(j=d.find(arguments,function(a){return d.isBoolean(a)}))?j:!0,b=d.find(arguments,function(a){return d.isFunction(a)}),null==b)throw new Error("Callback is null");return 0===f?void b(null,[]):(h=""+this._magisterObj._personUrl+"/berichten?mapId="+this.id()+"&top="+f+a(g),this._magisterObj.http.get(h,{},function(a){return function(f,g){var i,j,k,l,m,n;if(null!=f)return b(f,null);for(j=function(){var a,b,d,e;for(d=JSON.parse(g.content).Items,e=[],a=0,b=d.length;b>a;a++)i=d[a],e.push(c.Message._convertRaw(this._magisterObj,i));return e}.call(a),k=c._helpers.asyncResultWaiter(j.length,function(a){return b(null,d.sortBy(a,function(a){return a.sendDate()}).reverse())}),n=[],l=0,m=j.length;m>l;l++)i=j[l],n.push(function(b){return h=""+a._magisterObj._personUrl+"/berichten/"+b.id()+"?berichtSoort="+b.type(),a._magisterObj.http.get(h,{},function(d,f){var g,h,i;return h=JSON.parse(f.content),b._body=h.Inhoud,b._attachments=function(){var a,b,d,e,f;for(e=null!=(d=h.Bijlagen)?d:[],f=[],a=0,b=e.length;b>a;a++)g=e[a],f.push(c.File._convertRaw(this._magisterObj,void 0,g));return f}.call(a),e?(i=c._helpers.asyncResultWaiter(b.recipients().length+1,function(){return k(b)}),a._magisterObj.fillPersons(b.recipients(),function(a,c){return b._recipients=c,i(c)}),a._magisterObj.fillPersons(b.sender(),function(a,c){return b._sender=c,i(c)})):k(b)})}(i));return n}}(this)))},b.prototype.messageFolders=function(a,b){var e;return b=null!=(e=null!=b?b:a)?e:function(){},null!=b?this._magisterObj.http.get(""+this._magisterObj._personUrl+"/berichten/mappen?parentId="+this.id(),{},function(e){return function(f,g){var h,i;return null!=f?b(f,null):(i=function(){var a,b,d,e;for(d=JSON.parse(g.content).Items,e=[],a=0,b=d.length;b>a;a++)h=d[a],e.push(c.MessageFolder._convertRaw(this._magisterObj,h));return e}.call(e),g=d.isString(a)&&""!==a?d.where(i,function(b){return Helpers.contains(b.name(),a,!0)}):i,b(null,g))}}(this)):void 0},b.prototype.removeAllMessages=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/berichten/map/"+this.id(),{},function(a,b){if(null!=a)throw a})},b.prototype.createMessageFolder=function(a,b){var d;return null==b&&(b=function(){}),d={naam:a,parentId:this.id(),persoonId:this._magisterObj._id},this._magisterObj.http.post(""+this._magisterObj._personUrl+"/berichten/mappen",d,{},function(a){return function(d,e){return null!=d?b(d,null):b(null,c.MessageFolder._convertRaw(a._magisterObj,JSON.parse(e.content)))}}(this))},b.prototype.remove=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/berichten/mappen",this._toMagisterStyle(),{},function(a,b){if(null!=a)throw a})},b.prototype._toMagisterStyle=function(){var a;return a={},a.Naam=this._name,a.OngelezenBerichten=this._unreadMessagesCount,a.Id=this._id,a.ParentId=this._parentId,a},b._convertRaw=function(a,b){var d;return d=new c.MessageFolder(a),d._name=b.Naam,d._unreadMessagesCount=b.OngelezenBerichten,d._id=b.Id,d._parentId=b.ParentId,d},b}(),c=null!=(r="undefined"!=typeof module&&null!==module?module.exports:void 0)?r:this,c.Person=function(){function a(b,e,f,g){if(this._magisterObj=b,this._type=e,this._firstName=f,this._lastName=g,null!=this._firstName&&null!=this._lastName&&d.any(d.toArray(arguments).slice(2),function(a){return null!=a&&!d.isString(a)}))throw new Error("One or more arguments is not a string.");this.id=c._getset("_id"),this.type=c._getset("_type",function(b){return function(c){return b._type=a._convertType(c,!0)}}(this),a._convertType),this.firstName=c._getset("_firstName"),this.lastName=c._getset("_lastName"),this.namePrefix=c._getset("_namePrefix"),this.fullName=c._getset("_fullName"),this.description=c._getset("_description"),this.group=c._getset("_group"),this.teacherCode=c._getset("_teacherCode"),this.emailAddress=c._getset("_emailAddress")}return a.prototype._toMagisterStyle=function(){var a;return a={},a.Id=this._id,a.Type=this._type,a.Voornaam=this._firstName,a.Achternaam=this._lastName,a.Tussenvoegsel=this._namePrefix,a.Naam=this._fullName,a.Omschrijving=this._description,a.Groep=this._group,a.Docentcode=this._teacherCode,a.Emailadres=this._emailAddress,a},a._convertRaw=function(a,b){var d,e,f;return d=new c.Person(a,b.Type,b.Voornaam,b.Achternaam),d._id=b.Id,d._namePrefix=b.Tussenvoegsel,d._fullName=b.Naam,d._description=null!=(e=null!=(f=b.Omschrijving)?f:b.Naam)?e:b.naam,d._group=b.Groep,d._teacherCode=b.Docentcode,d._emailAddress=b.Emailadres,d},a._convertType=function(a,b){if(null==b&&(b=!0),b){if(d.isNumber(a)){if(!d.contains([1,3,4,8],a))throw new Error('Invalid value: "'+a+'".');return a}switch(a.toLowerCase()){case"group":return 1;case"teacher":return 3;case"pupil":return 4;case"project":return 8;default:throw new Error('Invalid value: "'+a+'".')}}else switch(a){case 1:return"group";case 3:return"teacher";case 4:return"pupil";case 8:return"project";default:return void 0}},a}(),c=null!=(g="undefined"!=typeof module&&null!==module?module.exports:void 0)?g:this,c.ProfileInfo=function(){function a(a,b,d,e){this._magisterObj=a,this._firstName=b,this._lastName=d,this._birthDate=e,this.id=c._getset("_id"),this.officialFirstNames=c._getset("_officialFirstNames"),this.initials=c._getset("_initials"),this.namePrefix=c._getset("_namePrefix"),this.officialSurname=c._getset("_officialSurname"),this.birthSurname=c._getset("_birthSurname"),this.birthNamePrefix=c._getset("_birthNamePrefix"),this.useBirthname=c._getset("_useBirthname"),this.firstName=c._getset("_firstName"),this.lastName=c._getset("_lastName"),this.fullName=function(){return this.firstName()+" "+this.lastName()},this.birthDate=c._getset("_birthDate")}return a.prototype.profilePicture=function(a,b,c){return null==a&&(a=640),null==b&&(b=640),null==c&&(c=!1),""+this._magisterObj._personUrl+"/foto?width="+a+"&height="+b+"&crop="+c},a.prototype.detailedInfo=function(a){var b;if(null==a)throw new Error("`callback` is required.");return b=c._helpers.asyncResultWaiter(2,function(b){return a(null,c.DetailedProfileInfo._convertRaw(d.extend(b[0],b[1])))}),this._magisterObj.http.get(""+this._magisterObj._personUrl+"/profiel",{},function(c,d){return null!=c?a(c,null):b(JSON.parse(d.content))}),this._magisterObj.http.get(""+this._magisterObj._personUrl+"/adresprofiel",{},function(c,d){return null!=c?a(c,null):b(JSON.parse(d.content))})},a._convertRaw=function(a,b){var d;return b=b.Persoon,d=new c.ProfileInfo(a,b.Roepnaam,b.Achternaam,new Date(Date.parse(b.Geboortedatum))),
d._id=b.Id,d._officialFirstNames=b.OfficieleVoornamen,d._initials=b.Voorletters,d._namePrefix=b.Tussenvoegsel,d._officialSurname=b.OfficieleAchternaam,d._birthSurname=b.GeboorteAchternaam,d._birthNamePrefix=b.GeboortenaamTussenvoegsel,d._useBirthname=b.GebruikGeboortenaam,d},a}(),c.DetailedProfileInfo=function(){function a(){this.redirectMagisterMessages=c._getset("_redirectMagisterMessages"),this.emailAddress=c._getset("_emailAddress"),this.mobileNumber=c._getset("_mobileNumber"),this.postalCode=c._getset("_postalCode"),this.street=c._getset("_street"),this.houseNumber=c._getset("_houseNumber"),this.suffix=c._getset("_suffix"),this.city=c._getset("_city")}return a._convertRaw=function(){var a,b;return b=arguments[2===arguments.length?1:0],a=new c.DetailedProfileInfo,a._redirectMagisterMessages=b.EloBerichtenDoorsturen,a._emailAddress=b.EmailAdres,a._mobileNumber=b.Mobiel,a._postalCode=b.Postcode,a._street=b.Straatnaam,a._houseNumber=b.Huisnummer,a._suffix=b.Toevoeging,a._city=b.Woonplaats,a},a}(),c=null!=(h="undefined"!=typeof module&&null!==module?module.exports:void 0)?h:this,c.MagisterSchool=function(){function a(a,b,c){this.id=a,this.name=b,this.url=c}return a.getSchools=function(a,b){return null==a||c._helpers.trim(a).length<3?void b(null,[]):(a=a.replace(/\d/g,"").trim(),(new MagisterHttp).get("https://mijn.magister.net/api/schools?filter="+a,{},function(a){return function(c,d){var e;return null!=c?b(c,null):b(null,function(){var a,b,c,f;for(c=JSON.parse(d.content),f=[],a=0,b=c.length;b>a;a++)e=c[a],f.push(this._convertRaw(e));return f}.call(a))}}(this)))},a._convertRaw=function(a){return new c.MagisterSchool(a.Id,a.Name,a.Url)},a}(),c=null!=(i="undefined"!=typeof module&&null!==module?module.exports:void 0)?i:this,c.StudyGuide=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.from=c._getset("_from"),this.to=c._getset("_to"),this.classCodes=c._getset("_classCodes"),this.name=c._getset("_name"),this.archived=c._getset("_archived"),this["class"]=c._getset("_class")}return a.prototype.parts=function(a){return null!=a?this._magisterObj.http.get(""+this._magisterObj._pupilUrl+"/studiewijzers/"+this.id(),{},function(b){return function(d,e){var f,g,h,i,j,k,l;if(null!=d)return a(d,null);for(e=JSON.parse(e.content).Onderdelen.Items,h=c._helpers.asyncResultWaiter(e.length,function(b){return a(null,b)}),k=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)g=e[a],c.push(g.Id);return c}(),l=[],i=0,j=k.length;j>i;i++)f=k[i],l.push(b._magisterObj.http.get(""+b._magisterObj._pupilUrl+"/studiewijzers/"+b.id()+"/onderdelen/"+f,{},function(a,d){return h(c.StudyGuidePart._convertRaw(b._magisterObj,JSON.parse(d.content)))}));return l}}(this)):void 0},a._convertRaw=function(a,b){var d;return d=new c.StudyGuide(a),d._id=b.Id,d._from=new Date(Date.parse(b.Van)),d._to=new Date(Date.parse(b.TotEnMet)),d._classCodes=b.VakCodes,d._class=b.VakCodes[0],d._name=b.Titel,d._archived=b.InLeerlingArchief,d},a}(),c.StudyGuidePart=function(){function a(a){this._magisterObj=a,this.id=c._getset("_id"),this.from=c._getset("_from"),this.to=c._getset("_to"),this.name=c._getset("_name"),this.description=c._getset("_description",null,function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,"").replace(/&amp;/gi,"&"):a}),this.visible=c._getset("_visible"),this.number=c._getset("_number"),this.files=c._getset("_files")}return a._convertRaw=function(a,b){var d,e;return e=new c.StudyGuidePart(a),e._id=b.Id,e._from=new Date(Date.parse(b.Van)),e._to=new Date(Date.parse(b.TotEnMet)),e._name=b.Titel,e._description=b.Omschrijving,e._visible=b.IsZichtbaar,e._number=b.Volgnummer,e._files=function(){var e,f,g,h;for(g=b.Bronnen,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(c.File._convertRaw(a,void 0,d));return h}(),e},a}(),c=null!=(j="undefined"!=typeof module&&null!==module?module.exports:void 0)?j:this,c._helpers=function(){function a(){}return a.addZero=function(a){return 10>a?"0"+a:a.toString()},a.toUtcString=function(b){return""+a.addZero(b.getUTCFullYear())+"-"+a.addZero(b.getMonth()+1)+"-"+a.addZero(b.getDate())+"T"+a.addZero(b.getHours())+":"+a.addZero(b.getMinutes())+":"+a.addZero(b.getSeconds())+".0000000Z"},a.pushMore=function(a,b){return[].push.apply(a,b),a},a.contains=function(a,b,c){return null==c&&(c=!1),c?a.toUpperCase().indexOf(b.toUpperCase())>=0:a.indexOf(b)>=0},a.asyncResultWaiter=function(b,c){var e,f;return 0===b&&c([]),f=[],e=b,function(b){return d.isArray(b)?(a.pushMore(f,b),e-=b.length):(f.push(b),e--),0===e?c(f):void 0}},a.trim=function(a){return null==a||0===a.length?"":d.isFunction(String.prototype.trim)?a.trim():a.replace(/^\s+|\s+$/g,"")},a.saveFile=function(a,b,c){try{return saveAs(new Blob([a],{type:b}),c)}catch(d){}},a.urlDateConvert=function(b){return""+b.getUTCFullYear()+"-"+a.addZero(b.getMonth()+1)+"-"+a.addZero(b.getDate())},a.date=function(a){return new Date(a.getUTCFullYear(),a.getMonth(),a.getDate())},a}(),c._getset=function(a,b,c){return function(e){if(null!=e){if(!d.isFunction(b))throw new Error("Changes on this property aren't allowed");b(e,!0)}return d.isFunction(c)?c(this[a],!1):this[a]}},null==Array.isArray&&(d.isArray=jQuery.isArray=Array.isArray=function(a){return Object.prototype.toString.call("[object Array]"===a)}),!function(a){"use strict";if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),saveAs=void 0;try{saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in c,e=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},f=a.webkitRequestFileSystem,g=a.requestFileSystem||f||a.mozRequestFileSystem,h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=0,j=function(b){var c=function(){"string"==typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()};a.chrome?c():setTimeout(c,10)},k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},l=function(b,h){var l,m,n,o=this,p=b.type,q=!1,r=function(){k(o,["writestart","progress","write","writeend"])},s=function(){(q||!l)&&(l=(a.URL||a.webkitURL||a).createObjectURL(b)),m?m.location.href=l:void 0==a.open(l,"_blank")&&"undefined"!=typeof safari&&(a.location.href=l),o.readyState=o.DONE,r(),j(l)},t=function(a){return function(){return o.readyState!==o.DONE?a.apply(this,arguments):void 0}},u={create:!0,exclusive:!1};o.readyState=o.INIT,h||(h="download"),d?(l=(a.URL||a.webkitURL||a).createObjectURL(b),c.href=l,c.download=h,e(c),o.readyState=o.DONE,r(),j(l)):(a.chrome&&p&&"application/octet-stream"!==p&&(n=b.slice||b.webkitSlice,b=n.call(b,0,b.size,"application/octet-stream"),q=!0),f&&"download"!==h&&(h+=".download"),("application/octet-stream"===p||f)&&(m=a),g?(i+=b.size,g(a.TEMPORARY,i,t(function(a){a.root.getDirectory("saved",u,t(function(a){var c=function(){a.getFile(h,u,t(function(a){a.createWriter(t(function(c){c.onwriteend=function(b){m.location.href=a.toURL(),o.readyState=o.DONE,k(o,"writeend",b),j(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&s()},["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=o["on"+a]}),c.write(b),o.abort=function(){c.abort(),o.readyState=o.DONE},o.readyState=o.WRITING}),s)}),s)};a.getFile(h,{create:!1},t(function(a){a.remove(),c()}),t(function(a){a.code===a.NOT_FOUND_ERR?c():s()}))}),s)}),s)):s())},m=l.prototype;return m.abort=function(){this.readyState=this.DONE,k(this,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,function(a,b){return new l(a,b)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs})}catch(t){}}.call(this),"undefined"!=typeof module&&module.exports||(Magister={Appointment:this.Appointment,Assignment:this.Assignment,AssignmentVersion:this.AssignmentVersion,Class:this.Class,Course:this.Course,DetailedProfileInfo:this.DetailedProfileInfo,DigitalSchoolUtility:this.DigitalSchoolUtility,File:this.File,FileFolder:this.FileFolder,Grade:this.Grade,GradeType:this.GradeType,Magister:this.Magister,MagisterSchool:this.MagisterSchool,Message:this.Message,MessageFolder:this.MessageFolder,Person:this.Person,ProfileInfo:this.ProfileInfo,StudyGuide:this.StudyGuide,StudyGuidePart:this.StudyGuidePart});